<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Selecting Data</title>
  
  <meta name="author" content="ldbc contributors"/>
  
  <meta name="author" content="Takahiko Tominaga"/>
  
  
  <meta name="description" content="Documentation for ldbc"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/site.css" />
  <script src="../../helium/site/laika-helium.js"></script>
    <script src="../../helium/site/laika-versions.js"></script>
  <script>initVersions("../../../", "/en/tutorial/Selecting-Data.html", "0.3", null);</script>
  
  <script> /* for avoiding page load transitions */ </script>
</head>

<body>

<header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    <div class="menu-container version-menu">
      <a class="text-link menu-toggle" href="#">Version 0.3</a>
      <nav class="menu-content">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../../older-versions.html">Older Versions</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>

<nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>

  
  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../">ldbc</a></li>
    <li class="level1 nav-leaf"><a href="../migration-notes.html">Migration Note</a></li>
    <li class="level1 nav-header">Tutorial</li>
    <li class="level2 nav-leaf"><a href="index.html">Introduction</a></li>
    <li class="level2 nav-leaf"><a href="Setup.html">Setup</a></li>
    <li class="level2 nav-leaf"><a href="Connection.html">Connection</a></li>
    <li class="level2 nav-leaf"><a href="Simple-Program.html">Simple Programs</a></li>
    <li class="level2 nav-leaf"><a href="Database-Operations.html">Database Operations</a></li>
    <li class="level2 nav-leaf"><a href="Parameterized-Queries.html">Parameterized Queries</a></li>
    <li class="level2 active nav-leaf"><a href="#">Selecting Data</a></li>
    <li class="level2 nav-leaf"><a href="Updating-Data.html">Updating Data</a></li>
    <li class="level2 nav-leaf"><a href="Error-Handling.html">Error Handling</a></li>
    <li class="level2 nav-leaf"><a href="Logging.html">logging</a></li>
    <li class="level2 nav-leaf"><a href="Custom-Data-Type.html">Custom Data Types</a></li>
    <li class="level2 nav-leaf"><a href="Query-Builder.html">Query Builder</a></li>
    <li class="level2 nav-leaf"><a href="Schema.html">Schema</a></li>
    <li class="level2 nav-leaf"><a href="Schema-Code-Generation.html">Schema Code Generation</a></li>
    <li class="level1 nav-header">Examples</li>
    <li class="level2 nav-leaf"><a href="../examples/">Introduction</a></li>
    <li class="level2 nav-leaf"><a href="../examples/Http4s.html">Http4s</a></li>
    <li class="level2 nav-leaf"><a href="../examples/HikariCP.html">HikariCP</a></li>
    <li class="level2 nav-leaf"><a href="../examples/Otel.html">OpenTelemetry</a></li>
    <li class="level1 nav-header">QA</li>
    <li class="level2 nav-leaf"><a href="../qa/">Introduction</a></li>
    <li class="level2 nav-leaf"><a href="../qa/What-is-ldbc.html">Q: What is ldbc?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/Which-dependencies-should-I-set.html">Q: Which dependencies should I set?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/What-is-the-difference-between-a-Java-connect-and-a-Scala-connector.html">Q: What is the difference between a Java connector and a Scala connector?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-define-complex-queries-with-plain-queries.html">Q: How to define complex queries with plain queries?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-do-I-use-my-own-type.html">Q: How do I use my own type?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-do-I-use-nested-models.html">Q: How do I use nested models?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-perform-DDL-with-schema.html">Q: How to perform DDL with schema?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-change-column-names-in-Query-Builder.html">Q: How to change column names in Query Builder?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-change-the-format-of-column-names-using-the-schema.html">Q: How to change the format of column names using the schema?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-do-I-add-processing-before-and-after-the-connection-is-established.html">Q: How do I add processing before and after the connection is established?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/Implicit-search-problem-too-large.html">Q: How to handle the `Implicit search problem too large.` error?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-use-scala-connector-connection-pool.html">Q: How to use connection pool with Scala connector?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/Is-there-a-way-to-stream-query-results-asynchronously.html">Q: Is there a way to stream query results asynchronously?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/Is-there-a-function-to-limit-the-number-of-concurrent-queries.html">Q: Is there a function to limit the number of concurrent queries?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-handle-multiple-databases.html">Q: How to handle multiple databases (multi-tenant environment)?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-to-use-with-ZIO.html">Q: How to use with ZIO?</a></li>
    <li class="level2 nav-leaf"><a href="../qa/How-do-I-use-the-Enum-type.html">Q: How to use the Enum type?</a></li>
    <li class="level1 nav-header">Reference</li>
    <li class="level2 nav-leaf"><a href="../reference/">Introduction</a></li>
    <li class="level2 nav-leaf"><a href="../reference/Connector.html">Connector</a></li>
    <li class="level2 nav-leaf"><a href="../reference/Performance.html">Performance</a></li>
  </ul>
  

</nav>

<div id="container">

  
<nav id="page-nav">
  <p class="header"><a href="#">Selecting Data</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#basic-data-retrieval-workflow">Basic Data Retrieval Workflow</a></li>
    <li class="level1 nav-leaf"><a href="#reading-rows-into-collections">Reading Rows into Collections</a></li>
    <li class="level1 nav-leaf"><a href="#multiple-column-queries">Multiple Column Queries</a></li>
    <li class="level1 nav-leaf"><a href="#mapping-to-case-classes">Mapping to Case Classes</a></li>
    <li class="level1 nav-leaf"><a href="#joining-multiple-tables-and-nested-case-classes">Joining Multiple Tables and Nested Case Classes</a></li>
    <li class="level1 nav-leaf"><a href="#using-tuples-for-join-queries">Using Tuples for Join Queries</a></li>
    <li class="level1 nav-leaf"><a href="#table-aliases-and-mapping">Table Aliases and Mapping</a></li>
    <li class="level1 nav-leaf"><a href="#getting-a-single-result-option-type">Getting a Single Result (Option Type)</a></li>
    <li class="level1 nav-leaf"><a href="#choosing-query-execution-methods">Choosing Query Execution Methods</a></li>
    <li class="level1 nav-leaf"><a href="#combining-collection-operations-with-queries">Combining Collection Operations with Queries</a></li>
    <li class="level1 nav-leaf"><a href="#summary">Summary</a></li>
    <li class="level1 nav-leaf"><a href="#next-steps">Next Steps</a></li>
  </ul>

  <p class="footer"></p>
</nav>


  <main class="content">

    <h1 id="selecting-data" class="title">Selecting Data</h1>
    <p>Now that we&#39;ve learned about <a href="Parameterized-Queries.html">Parameterized Queries</a>, let&#39;s look at how to retrieve data in various formats. This page explains how to efficiently fetch data using SELECT queries and map them to Scala types.</p>
    <p>One of ldbc&#39;s most powerful features is its ability to easily map database results to Scala types. It can handle various data formats, from simple primitive types to complex case classes.</p>
    
    <h2 id="basic-data-retrieval-workflow" class="section"><a class="anchor-link left" href="#basic-data-retrieval-workflow"><i class="icofont-laika link">&#xef71;</i></a>Basic Data Retrieval Workflow</h2>
    <p>The basic flow for retrieving data with ldbc is as follows:</p>
    <ol class="arabic">
      <li>Create an SQL query with the <code>sql</code> interpolator</li>
      <li>Specify the result type with <code>.query[T]</code></li>
      <li>Convert results to a collection with <code>.to[Collection]</code> (optional)</li>
      <li>Execute the query using <code>.readOnly()</code>/<code>.commit()</code>/<code>.transaction()</code>, etc.</li>
      <li>Process the results</li>
    </ol>
    <p>Let&#39;s look at this flow along with the type transformations in code.</p>
    
    <h2 id="reading-rows-into-collections" class="section"><a class="anchor-link left" href="#reading-rows-into-collections"><i class="icofont-laika link">&#xef71;</i></a>Reading Rows into Collections</h2>
    <p>In our first query, let&#39;s look at an example that retrieves some usernames into a list and outputs them. We&#39;ll show how the types change at each step:</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="string-literal">sql&quot;SELECT name FROM user&quot;</span><span>
  .</span><span class="identifier">query</span><span>[</span><span class="type-name">String</span><span>]                 </span><span class="comment">// Query[String]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]                      </span><span class="comment">// DBIO[List[String]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[List[String]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// List[String]
</span><span>  .</span><span class="identifier">foreach</span><span>(</span><span class="identifier">println</span><span>)              </span><span class="comment">// Unit</span></code></pre>
    <p>Let&#39;s explain this code in detail:</p>
    <ul>
      <li><code>sql&quot;SELECT name FROM user&quot;</code> - Defines the SQL query.</li>
      <li><code>.query[String]</code> - Maps each row result to a <code>String</code> type. This generates a <code>Query[String]</code> type.</li>
      <li><code>.to[List]</code> - Aggregates the results into a <code>List</code>. This generates a <code>DBIO[List[String]]</code> type. This method can be used with any collection type that implements <code>FactoryCompat</code> (such as <code>List</code>, <code>Vector</code>, <code>Set</code>, etc.).</li>
      <li><code>.readOnly(conn)</code> - Executes the query using the connection in read-only mode. The return value is <code>IO[List[String]]</code>.</li>
      <li><code>.unsafeRunSync()</code> - Executes the IO monad to get the actual result (<code>List[String]</code>).</li>
      <li><code>.foreach(println)</code> - Outputs each element of the result.</li>
    </ul>
    
    <h2 id="multiple-column-queries" class="section"><a class="anchor-link left" href="#multiple-column-queries"><i class="icofont-laika link">&#xef71;</i></a>Multiple Column Queries</h2>
    <p>Of course, you can select multiple columns and map them to tuples:</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="string-literal">sql&quot;SELECT name, email FROM user&quot;</span><span>
  .</span><span class="identifier">query</span><span>[(</span><span class="type-name">String</span><span>, </span><span class="type-name">String</span><span>)]       </span><span class="comment">// Query[(String, String)]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]                      </span><span class="comment">// DBIO[List[(String, String)]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[List[(String, String)]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// List[(String, String)]
</span><span>  .</span><span class="identifier">foreach</span><span> { </span><span class="keyword">case</span><span> (</span><span class="identifier">name</span><span>, </span><span class="identifier">email</span><span>) =&gt; </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;Name: </span><span class="substitution">$name</span><span class="string-literal">, Email: </span><span class="substitution">$email</span><span class="string-literal">&quot;</span><span>) }</span></code></pre>
    <p>In multiple column queries, it&#39;s important that the order of selected columns matches the order of type parameters in the tuple. In the above example, <code>name</code> corresponds to the 1st column (tuple&#39;s <code>_1</code>), and <code>email</code> to the 2nd column (tuple&#39;s <code>_2</code>).</p>
    
    <h2 id="mapping-to-case-classes" class="section"><a class="anchor-link left" href="#mapping-to-case-classes"><i class="icofont-laika link">&#xef71;</i></a>Mapping to Case Classes</h2>
    <p>While tuples are convenient, we recommend using case classes to improve code readability. ldbc can automatically map query results to case classes:</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="comment">// Case class representing user information
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">User</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">email</span><span>: </span><span class="type-name">String</span><span>)

</span><span class="comment">// Query execution and mapping
</span><span class="string-literal">sql&quot;SELECT id, name, email FROM user&quot;</span><span>
  .</span><span class="identifier">query</span><span>[</span><span class="type-name">User</span><span>]                   </span><span class="comment">// Query[User]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]                      </span><span class="comment">// DBIO[List[User]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[List[User]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// List[User]
</span><span>  .</span><span class="identifier">foreach</span><span>(</span><span class="identifier">user</span><span> =&gt; </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;ID: </span><span class="substitution">${user.id}</span><span class="string-literal">, Name: </span><span class="substitution">${user.name}</span><span class="string-literal">, Email: </span><span class="substitution">${user.email}</span><span class="string-literal">&quot;</span><span>))</span></code></pre>
    <p><strong>Important</strong>: The field names in the case class need to match the column names selected in the SQL query. The order also needs to match, but ldbc will map appropriately if the names match exactly.</p>
    <p><img src="../../img/data_select.png" alt="Selecting Data"></p>
    
    <h2 id="joining-multiple-tables-and-nested-case-classes" class="section"><a class="anchor-link left" href="#joining-multiple-tables-and-nested-case-classes"><i class="icofont-laika link">&#xef71;</i></a>Joining Multiple Tables and Nested Case Classes</h2>
    <p>When retrieving data from multiple tables using <code>JOIN</code>, you can map to nested case class structures. In the following example, we join the <code>city</code> and <code>country</code> tables and map the result to a <code>CityWithCountry</code> class:</p>
    <pre><code class="nohighlight"><span class="comment">// Case class representing a city
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">City</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>)

</span><span class="comment">// Case class representing a country
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Country</span><span>(</span><span class="identifier">code</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">region</span><span>: </span><span class="type-name">String</span><span>)

</span><span class="comment">// Case class combining city and country information
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">CityWithCountry</span><span>(</span><span class="identifier">city</span><span>: </span><span class="type-name">City</span><span>, </span><span class="identifier">country</span><span>: </span><span class="type-name">Country</span><span>)

</span><span class="comment">// Executing a join query
</span><span class="string-literal">sql&quot;&quot;&quot;
  SELECT
    city.id,
    city.name,
    country.code,
    country.name,
    country.region
  FROM city
  JOIN country ON city.country_code = country.code
&quot;&quot;&quot;</span><span>
  .</span><span class="identifier">query</span><span>[</span><span class="type-name">CityWithCountry</span><span>]        </span><span class="comment">// Query[CityWithCountry]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]                      </span><span class="comment">// DBIO[List[CityWithCountry]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[List[CityWithCountry]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// List[CityWithCountry]
</span><span>  .</span><span class="identifier">foreach</span><span>(</span><span class="identifier">cityWithCountry</span><span> =&gt; </span><span class="identifier">println</span><span>(
    </span><span class="string-literal">s&quot;City: </span><span class="substitution">${cityWithCountry.city.name}</span><span class="string-literal">, Country: </span><span class="substitution">${cityWithCountry.country.name}</span><span class="string-literal">&quot;</span><span>
  ))</span></code></pre>
    <p>A feature of ldbc is that columns specified in the format <code>table_name.column_name</code> are automatically mapped to <code>class_name.field_name</code>. This enables the following mappings in the above example:</p>
    <ul>
      <li><code>city.id</code> → <code>CityWithCountry.city.id</code></li>
      <li><code>city.name</code> → <code>CityWithCountry.city.name</code></li>
      <li><code>country.code</code> → <code>CityWithCountry.country.code</code></li>
      <li><code>country.name</code> → <code>CityWithCountry.country.name</code></li>
      <li><code>country.region</code> → <code>CityWithCountry.country.region</code></li>
    </ul>
    <p><img src="../../img/data_multi_select.png" alt="Selecting Data"></p>
    
    <h2 id="using-tuples-for-join-queries" class="section"><a class="anchor-link left" href="#using-tuples-for-join-queries"><i class="icofont-laika link">&#xef71;</i></a>Using Tuples for Join Queries</h2>
    <p>Instead of nested case classes, you can also use tuples to retrieve data from multiple tables:</p>
    <pre><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">City</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>)
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Country</span><span>(</span><span class="identifier">code</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">region</span><span>: </span><span class="type-name">String</span><span>)

</span><span class="string-literal">sql&quot;&quot;&quot;
  SELECT
    city.id,
    city.name,
    country.code,
    country.name,
    country.region
  FROM city
  JOIN country ON city.country_code = country.code
&quot;&quot;&quot;</span><span>
  .</span><span class="identifier">query</span><span>[(</span><span class="type-name">City</span><span>, </span><span class="type-name">Country</span><span>)]        </span><span class="comment">// Query[(City, Country)]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]                      </span><span class="comment">// DBIO[List[(City, Country)]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[List[(City, Country)]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// List[(City, Country)]
</span><span>  .</span><span class="identifier">foreach</span><span> { </span><span class="keyword">case</span><span> (</span><span class="identifier">city</span><span>, </span><span class="identifier">country</span><span>) =&gt; 
    </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;City: </span><span class="substitution">${city.name}</span><span class="string-literal">, Country: </span><span class="substitution">${country.name}</span><span class="string-literal">&quot;</span><span>)
  }</span></code></pre>
    <p>It&#39;s important to note that when using tuples, the table name and the case class name need to match. That is, the <code>city</code> table is mapped to the <code>City</code> class, and the <code>country</code> table is mapped to the <code>Country</code> class.</p>
    
    <h2 id="table-aliases-and-mapping" class="section"><a class="anchor-link left" href="#table-aliases-and-mapping"><i class="icofont-laika link">&#xef71;</i></a>Table Aliases and Mapping</h2>
    <p>When using aliases for tables in SQL statements, you need to match the case class name with that alias:</p>
    <pre><code class="nohighlight"><span class="comment">// Case class names matching alias names
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">C</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>)
</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">CT</span><span>(</span><span class="identifier">code</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">region</span><span>: </span><span class="type-name">String</span><span>)

</span><span class="string-literal">sql&quot;&quot;&quot;
  SELECT
    c.id,
    c.name,
    ct.code,
    ct.name,
    ct.region
  FROM city AS c
  JOIN country AS ct ON c.country_code = ct.code
&quot;&quot;&quot;</span><span>
  .</span><span class="identifier">query</span><span>[(</span><span class="type-name">C</span><span>, </span><span class="type-name">CT</span><span>)]                </span><span class="comment">// Query[(C, CT)]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]                      </span><span class="comment">// DBIO[List[(C, CT)]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[List[(C, CT)]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// List[(C, CT)]
</span><span>  .</span><span class="identifier">foreach</span><span> { </span><span class="keyword">case</span><span> (</span><span class="identifier">city</span><span>, </span><span class="identifier">country</span><span>) =&gt; 
    </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;City: </span><span class="substitution">${city.name}</span><span class="string-literal">, Country: </span><span class="substitution">${country.name}</span><span class="string-literal">&quot;</span><span>)
  }</span></code></pre>
    
    <h2 id="getting-a-single-result-option-type" class="section"><a class="anchor-link left" href="#getting-a-single-result-option-type"><i class="icofont-laika link">&#xef71;</i></a>Getting a Single Result (Option Type)</h2>
    <p>If you want to get a single result or an optional result (0 or 1 record) instead of a list, you can use <code>.to[Option]</code>:</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">User</span><span>(</span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>, </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>, </span><span class="identifier">email</span><span>: </span><span class="type-name">String</span><span>)

</span><span class="comment">// Searching for a single user by ID
</span><span class="string-literal">sql&quot;SELECT id, name, email FROM user WHERE id = </span><span class="substitution">${userId}</span><span class="string-literal">&quot;</span><span>
  .</span><span class="identifier">query</span><span>[</span><span class="type-name">User</span><span>]                   </span><span class="comment">// Query[User]
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">Option</span><span>]                    </span><span class="comment">// DBIO[Option[User]]
</span><span>  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)                </span><span class="comment">// IO[Option[User]]
</span><span>  .</span><span class="identifier">unsafeRunSync</span><span>()               </span><span class="comment">// Option[User]
</span><span>  .</span><span class="identifier">foreach</span><span>(</span><span class="identifier">user</span><span> =&gt; </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;Found user: </span><span class="substitution">${user.name}</span><span class="string-literal">&quot;</span><span>))</span></code></pre>
    <p>If no result is found, <code>None</code> is returned, and if one is found, <code>Some(User(...))</code> is returned.</p>
    
    <h2 id="choosing-query-execution-methods" class="section"><a class="anchor-link left" href="#choosing-query-execution-methods"><i class="icofont-laika link">&#xef71;</i></a>Choosing Query Execution Methods</h2>
    <p>ldbc provides different query execution methods depending on the purpose:</p>
    <ul>
      <li><code>.readOnly(conn)</code> - Used for read-only operations (such as SELECT statements)</li>
      <li><code>.commit(conn)</code> - Executes write operations in auto-commit mode</li>
      <li><code>.rollback(conn)</code> - Executes write operations and always rolls back (for testing)</li>
      <li><code>.transaction(conn)</code> - Executes operations within a transaction and commits only on success</li>
    </ul>
    <pre><code class="nohighlight"><span class="comment">// Example of a read-only operation
</span><span class="string-literal">sql&quot;SELECT * FROM users&quot;</span><span>
  .</span><span class="identifier">query</span><span>[</span><span class="type-name">User</span><span>]
  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]
  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)

</span><span class="comment">// Example of a write operation (auto-commit)
</span><span class="string-literal">sql&quot;UPDATE users SET name = </span><span class="substitution">${newName}</span><span class="string-literal"> WHERE id = </span><span class="substitution">${userId}</span><span class="string-literal">&quot;</span><span>
  .</span><span class="identifier">update</span><span>
  .</span><span class="identifier">commit</span><span>(</span><span class="identifier">conn</span><span>)

</span><span class="comment">// Multiple operations in a transaction
</span><span>(</span><span class="keyword">for</span><span> {
  </span><span class="identifier">userId</span><span> &lt;- </span><span class="string-literal">sql&quot;INSERT INTO users (name, email) VALUES (</span><span class="substitution">${name}</span><span class="string-literal">, </span><span class="substitution">${email}</span><span class="string-literal">)&quot;</span><span>.</span><span class="identifier">returning</span><span>[</span><span class="type-name">Long</span><span>]
  </span><span class="identifier">_</span><span>      &lt;- </span><span class="string-literal">sql&quot;INSERT INTO user_roles (user_id, role_id) VALUES (</span><span class="substitution">${userId}</span><span class="string-literal">, </span><span class="substitution">${roleId}</span><span class="string-literal">)&quot;</span><span>.</span><span class="identifier">update</span><span>
} </span><span class="keyword">yield</span><span> </span><span class="identifier">userId</span><span>).</span><span class="identifier">transaction</span><span>(</span><span class="identifier">conn</span><span>)</span></code></pre>
    
    <h2 id="combining-collection-operations-with-queries" class="section"><a class="anchor-link left" href="#combining-collection-operations-with-queries"><i class="icofont-laika link">&#xef71;</i></a>Combining Collection Operations with Queries</h2>
    <p>By applying Scala collection operations to retrieved data, you can concisely describe more complex data processing:</p>
    <pre><code class="nohighlight"><span class="comment">// Example of grouping users
</span><span class="string-literal">sql&quot;SELECT id, name, department FROM employees&quot;</span><span>
  .</span><span class="identifier">query</span><span>[(</span><span class="type-name">Long</span><span>, </span><span class="type-name">String</span><span>, </span><span class="type-name">String</span><span>)] </span><span class="comment">// ID, name, department
</span><span>  .</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>]
  .</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)
  .</span><span class="identifier">unsafeRunSync</span><span>()
  .</span><span class="identifier">groupBy</span><span>(</span><span class="identifier">_</span><span class="number-literal">._3</span><span>) </span><span class="comment">// Group by department
</span><span>  .</span><span class="identifier">map</span><span> { </span><span class="keyword">case</span><span> (</span><span class="identifier">department</span><span>, </span><span class="identifier">employees</span><span>) =&gt; 
    (</span><span class="identifier">department</span><span>, </span><span class="identifier">employees</span><span>.</span><span class="identifier">map</span><span>(</span><span class="identifier">_</span><span class="number-literal">._2</span><span>)) </span><span class="comment">// Map to department name and list of employee names
</span><span>  }
  .</span><span class="identifier">foreach</span><span> { </span><span class="keyword">case</span><span> (</span><span class="identifier">department</span><span>, </span><span class="identifier">names</span><span>) =&gt;
    </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;Department: </span><span class="substitution">$department</span><span class="string-literal">, Employees: </span><span class="substitution">${names.mkString(&quot;, &quot;)}</span><span class="string-literal">&quot;</span><span>)
  }</span></code></pre>
    
    <h2 id="summary" class="section"><a class="anchor-link left" href="#summary"><i class="icofont-laika link">&#xef71;</i></a>Summary</h2>
    <p>ldbc provides features for retrieving data from databases in a type-safe and intuitive manner. In this tutorial, we covered:</p>
    <ul>
      <li>The basic workflow for data retrieval</li>
      <li>Single-column and multi-column queries</li>
      <li>Mapping to case classes</li>
      <li>Joining multiple tables and nested data structures</li>
      <li>Getting single and multiple results</li>
      <li>Various execution methods</li>
    </ul>
    <p>Use this knowledge to efficiently retrieve data from databases in your applications and maximize the benefits of Scala&#39;s type system.</p>
    
    <h2 id="next-steps" class="section"><a class="anchor-link left" href="#next-steps"><i class="icofont-laika link">&#xef71;</i></a>Next Steps</h2>
    <p>Now that you understand how to retrieve data from databases in various formats, you&#39;ve seen how type-safe mapping allows you to map database results directly to Scala data structures.</p>
    <p>Next, let&#39;s move on to <a href="Updating-Data.html">Updating Data</a> to learn how to insert, update, and delete data.</p>

    
<hr class="footer-rule"/>
<footer>
  ldbc is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://img.shields.io/badge/license-MIT-green">MIT</a> license.
</footer>


  </main>

</div>

</body>

</html>
