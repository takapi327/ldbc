<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Schema Code Generation</title>
  
  <meta name="author" content="ldbc contributors"/>
  
  <meta name="author" content="Takahiko Tominaga"/>
  
  
  <meta name="description" content="Documentation for ldbc"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../css/site.css" />
  <script src="../helium/site/laika-helium.js"></script>
    <script src="../helium/site/laika-versions.js"></script>
  <script>initVersions("../../", "/en/07-Schema-Code-Generation.html", "0.2", null);</script>
  
  <script> /* for avoiding page load transitions */ </script>
</head>

<body>

<header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    <div class="menu-container version-menu">
      <a class="text-link menu-toggle" href="#">Version 0.2</a>
      <nav class="menu-content">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../older-versions.html">Older Versions</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>

<nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>

  
  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="index.html">ldbc</a></li>
    <li class="level1 nav-leaf"><a href="01-Table-Definitions.html">Table Definitions</a></li>
    <li class="level1 nav-leaf"><a href="02-Custom-Data-Type.html">Custom Data Type</a></li>
    <li class="level1 nav-leaf"><a href="03-Type-safe-Query-Builder.html">Type-safe Query Construction</a></li>
    <li class="level1 nav-leaf"><a href="04-Database-Connection.html">Database Connection</a></li>
    <li class="level1 nav-leaf"><a href="05-Plain-SQL-Queries.html">Plain SQL Queries</a></li>
    <li class="level1 nav-leaf"><a href="06-Generating-SchemaSPY-Documentation.html">SchemaSPY Document Generation</a></li>
    <li class="level1 active nav-leaf"><a href="#">Schema Code Generation</a></li>
    <li class="level1 nav-leaf"><a href="08-Performance.html">Performance</a></li>
  </ul>
  

</nav>

<div id="container">

  
<nav id="page-nav">
  <p class="header"><a href="#">Schema Code Generation</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#generation">Generation</a></li>
    <li class="level1 nav-leaf"><a href="#generation-code">Generation Code</a></li>
    <li class="level1 nav-leaf"><a href="#customize">Customize</a></li>
  </ul>

  <p class="footer"></p>
</nav>


  <main class="content">

    <h1 id="schema-code-generation" class="title">Schema Code Generation</h1>
    <p>This chapter describes how to automatically generate LDBC table definitions from SQL files.</p>
    <p>The following dependencies must be set up for the project</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">addSbtPlugin</span><span>(</span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> % </span><span class="string-literal">&quot;ldbc-plugin&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta9&quot;</span><span>)</span></code></pre>
    
    <h2 id="generation" class="section"><a class="anchor-link left" href="#generation"><i class="icofont-laika link">&#xef71;</i></a>Generation</h2>
    <p>Enable the plugin for the project.</p>
    <pre class="keep-together pdf epub"><code class="sbt">lazy val root = (project in file(&quot;.&quot;))
  .enablePlugins(Ldbc)</code></pre>
    <p>Specify the SQL file to be analyzed as an array.</p>
    <pre class="keep-together pdf epub"><code class="sbt">Compile / parseFiles := List(baseDirectory.value / &quot;test.sql&quot;)</code></pre>
    <p><strong>List of keys that can be set by enabling the plugin</strong></p>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>parseFiles</code></td>
          <td><code>List of SQL files to be analyzed</code></td>
        </tr>
        <tr>
          <td><code>parseDirectories</code></td>
          <td><code>Specify SQL files to be parsed by directory</code></td>
        </tr>
        <tr>
          <td><code>excludeFiles</code></td>
          <td><code>List of file names to exclude from analysis</code></td>
        </tr>
        <tr>
          <td><code>customYamlFiles</code></td>
          <td><code>List of yaml files for customizing Scala types and column data types</code></td>
        </tr>
        <tr>
          <td><code>classNameFormat</code></td>
          <td><code>Value specifying the format of the class name</code></td>
        </tr>
        <tr>
          <td><code>propertyNameFormat</code></td>
          <td><code>Value specifying the format of the property name in the Scala model</code></td>
        </tr>
        <tr>
          <td><code>ldbcPackage</code></td>
          <td><code>Value specifying the package name of the generated file</code></td>
        </tr>
      </tbody>
    </table>
    <p>The SQL file to be parsed must always begin with a database Create or Use statement, and LDBC parses the file one file at a time, generating table definitions and storing the list of tables in the database model.
    This is because it is necessary to tell which database the table belongs to.</p>
    <pre class="keep-together pdf epub"><code class="mysql">CREATE DATABASE `location`;

USE `location`;

DROP TABLE IF EXISTS `country`;
CREATE TABLE country (
  `id` BIGINT AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `code` INT NOT NULL
);</code></pre>
    <p>The SQL file to be analyzed should contain only Create/Use statements for the database or Create/Drop statements for table definitions.</p>
    
    <h2 id="generation-code" class="section"><a class="anchor-link left" href="#generation-code"><i class="icofont-laika link">&#xef71;</i></a>Generation Code</h2>
    <p>When the sbt project is started and compiled, model classes generated based on the SQL file to be analyzed and table definitions are generated under the target of the sbt project.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span>sbt compile</span></code></pre>
    <p>The code generated from the above SQL file will look like this.</p>
    <pre><code class="nohighlight"><span class="keyword">package</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">generated</span><span>.</span><span class="identifier">location</span><span>

</span><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">core</span><span>.*

</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Country</span><span>(
  </span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>,
  </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>,
  </span><span class="identifier">code</span><span>: </span><span class="type-name">Int</span><span>
)

</span><span class="keyword">object</span><span> </span><span class="type-name">Country</span><span>:
  </span><span class="keyword">val</span><span> </span><span class="identifier">table</span><span> = </span><span class="type-name">Table</span><span>[</span><span class="type-name">Country</span><span>](</span><span class="string-literal">&quot;country&quot;</span><span>)(
    </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;id&quot;</span><span>, </span><span class="type-name">BIGINT</span><span>, </span><span class="type-name">AUTO_INCREMENT</span><span>, </span><span class="type-name">PRIMARY_KEY</span><span>),
    </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;name&quot;</span><span>, </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">255</span><span>)),
    </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;code&quot;</span><span>, </span><span class="type-name">INT</span><span>)
  )</span></code></pre>
    <p>If the SQL file has been modified or the cache has been removed by running the clean command, Compile will generate the code again. If the SQL file has been modified or the cache has been removed by executing the clean command, the code will be generated again by executing Compile.
    If you want to generate code again without using the cache, execute the command <code>generateBySchema</code>. This command will always generate code without using the cache.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span>sbt generateBySchema</span></code></pre>
    
    <h2 id="customize" class="section"><a class="anchor-link left" href="#customize"><i class="icofont-laika link">&#xef71;</i></a>Customize</h2>
    <p>There may be times when you want to convert the type of code generated from an SQL file to something else. This can be done by passing <code>customYamlFiles</code> with the yml files to be customized.</p>
    <pre class="keep-together pdf epub"><code class="sbt">Compile / customYamlFiles := List(
  baseDirectory.value / &quot;custom.yml&quot;
)</code></pre>
    <p>The format of the yml file should be as follows</p>
    <pre><code class="nohighlight"><span class="attribute-name">database</span><span>:
  </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;{Database Name}&#39;</span><span>
  </span><span class="attribute-name">tables</span><span>:
    - </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;{table name}&#39;</span><span>
      </span><span class="attribute-name">columns</span><span>: </span><span class="string-literal"># Optional</span><span>
        - </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;{column name}&#39;</span><span>
          </span><span class="attribute-name">type</span><span>: </span><span class="string-literal">&#39;{Scala type you want to change}&#39;</span><span>
      </span><span class="attribute-name">class</span><span>: </span><span class="string-literal"># Optional</span><span>
        </span><span class="attribute-name">extends</span><span>:
          - </span><span class="string-literal">&#39;{Package paths such as trait that you want model classes to inherit}&#39;</span><span> // package.trait.name
      </span><span class="attribute-name">object</span><span>: </span><span class="string-literal"># Optional</span><span>
        </span><span class="attribute-name">extends</span><span>:
          - </span><span class="string-literal">&#39;{The package path, such as trait, that you want the object to inherit.}&#39;</span><span>
    - </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;{table name}&#39;</span><span>
      ...</span></code></pre>
    <p>The <code>database</code> must be the name of the database listed in the SQL file to be analyzed. The table name must be the name of a table belonging to the database listed in the SQL file to be analyzed.</p>
    <p>In the <code>columns</code> field, enter the name of the column to be retyped and the Scala type to be changed as a string. You can set multiple values for <code>columns</code>, but the column name listed in name must be in the target table.
    Also, the Scala type to be converted must be one that is supported by the column&#39;s Data type. If you want to specify an unsupported type, you must pass a trait, abstract class, etc. that is configured to do implicit type conversion for <code>object</code>.</p>
    <p>See <a href="01-Table-Definitions.html">here</a> for types supported by the Data type and <a href="02-Custom-Data-Type.html">here</a>.</p>
    <p>To convert an Int type to the user&#39;s own type, CountryCode, implement the following <code>CustomMapping</code>trait.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">trait</span><span> </span><span class="type-name">CountryCode</span><span>:
  </span><span class="keyword">val</span><span> </span><span class="identifier">code</span><span>: </span><span class="type-name">Int</span><span>
</span><span class="keyword">object</span><span> </span><span class="type-name">Japan</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">CountryCode</span><span>:
  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">code</span><span>: </span><span class="type-name">Int</span><span> = </span><span class="number-literal">1</span><span>

</span><span class="keyword">trait</span><span> </span><span class="type-name">CustomMapping</span><span>: </span><span class="comment">// Any name
</span><span>  </span><span class="keyword">given</span><span> </span><span class="type-name">Conversion</span><span>[</span><span class="type-name">INT</span><span>[</span><span class="type-name">Int</span><span>], </span><span class="type-name">CountryCode</span><span>] = </span><span class="type-name">DataType</span><span>.</span><span class="identifier">mappingp</span><span>[</span><span class="type-name">INT</span><span>[</span><span class="type-name">Int</span><span>], </span><span class="type-name">CountryCode</span><span>]</span></code></pre>
    <p>Set the <code>CustomMapping</code>trait that you have implemented in the yml file for customization, and convert the target column type to CountryCode.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="attribute-name">database</span><span>:
  </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;location&#39;</span><span>
  </span><span class="attribute-name">tables</span><span>:
    - </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;country&#39;</span><span>
      </span><span class="attribute-name">columns</span><span>:
        - </span><span class="attribute-name">name</span><span>: </span><span class="string-literal">&#39;code&#39;</span><span>
          </span><span class="attribute-name">type</span><span>: </span><span class="string-literal">&#39;Country.CountryCode&#39;</span><span> // CustomMapping is mixed in with the Country object so that it can be retrieved from there.
      </span><span class="attribute-name">object</span><span>:
        </span><span class="attribute-name">extends</span><span>:
          - </span><span class="string-literal">&#39;{package.name.}CustomMapping&#39;</span></code></pre>
    <p>The code generated by the above configuration will be as follows, allowing users to generate model and table definitions with their own types.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Country</span><span>(
  </span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>,
  </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>,
  </span><span class="identifier">code</span><span>: </span><span class="type-name">Country</span><span>.</span><span class="type-name">CountryCode</span><span>
)

</span><span class="keyword">object</span><span> </span><span class="type-name">Country</span><span> </span><span class="keyword">extends</span><span> </span><span class="comment">/*{package.name.}*/</span><span class="type-name">CustomMapping</span><span>:
  </span><span class="keyword">val</span><span> </span><span class="identifier">table</span><span> = </span><span class="type-name">Table</span><span>[</span><span class="type-name">Country</span><span>](</span><span class="string-literal">&quot;country&quot;</span><span>)(
    </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;id&quot;</span><span>, </span><span class="type-name">BIGINT</span><span>, </span><span class="type-name">AUTO_INCREMENT</span><span>, </span><span class="type-name">PRIMARY_KEY</span><span>),
    </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;name&quot;</span><span>, </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">255</span><span>)),
    </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;code&quot;</span><span>, </span><span class="type-name">INT</span><span>)
  )</span></code></pre>
    <p>The database model is also automatically generated from SQL files.</p>
    <pre><code class="nohighlight"><span class="keyword">package</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">generated</span><span>.</span><span class="identifier">location</span><span>

</span><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">core</span><span>.*

</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">LocationDatabase</span><span>(
  </span><span class="identifier">schemaMeta</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">String</span><span>] = </span><span class="type-name">None</span><span>,
  </span><span class="identifier">catalog</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">String</span><span>] = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;def&quot;</span><span>),
  </span><span class="identifier">host</span><span>: </span><span class="type-name">String</span><span> = </span><span class="string-literal">&quot;127.0.0.1&quot;</span><span>,
  </span><span class="identifier">port</span><span>: </span><span class="type-name">Int</span><span> = </span><span class="number-literal">3306</span><span>
) </span><span class="keyword">extends</span><span> </span><span class="type-name">Database</span><span>:

  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">databaseType</span><span>: </span><span class="type-name">Database</span><span>.</span><span class="type-name">Type</span><span> = </span><span class="type-name">Database</span><span>.</span><span class="type-name">Type</span><span>.</span><span class="type-name">MySQL</span><span>

  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span> = </span><span class="string-literal">&quot;location&quot;</span><span>

  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">schema</span><span>: </span><span class="type-name">String</span><span> = </span><span class="string-literal">&quot;location&quot;</span><span>

  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">character</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Character</span><span>] = </span><span class="type-name">None</span><span>

  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">collate</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Collate</span><span>] = </span><span class="type-name">None</span><span>

  </span><span class="keyword">override</span><span> </span><span class="keyword">val</span><span> </span><span class="identifier">tables</span><span> = </span><span class="type-name">Set</span><span>(
    </span><span class="type-name">Country</span><span>.</span><span class="identifier">table</span><span>
  )</span></code></pre>

    
<hr class="footer-rule"/>
<footer>
  ldbc is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://img.shields.io/badge/license-MIT-green">MIT</a> license.
</footer>


  </main>

</div>

</body>

</html>
