<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Connector</title>
  
  <meta name="author" content="ldbc contributors"/>
  
  <meta name="author" content="Takahiko Tominaga"/>
  
  
  <meta name="description" content="Documentation for ldbc"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/site.css" />
  <script src="../../helium/site/laika-helium.js"></script>
    <script src="../../helium/site/laika-versions.js"></script>
  <script>initVersions("../../../", "/en/reference/Connector.html", "latest", null);</script>
  
  <script> /* for avoiding page load transitions */ </script>
</head>

<body>

<header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    <div class="menu-container version-menu">
      <a class="text-link menu-toggle" href="#">Version 0.3</a>
      <nav class="menu-content">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../../older-versions.html">Older Versions</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>

<nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>

  
  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../">ldbc</a></li>
    <li class="level1 nav-header">Tutorial</li>
    <li class="level2 nav-leaf"><a href="../tutorial/">Intro</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Setup.html">Setup</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Connection.html">Connection</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Simple-Program.html">Simple Program</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Database-Operations.html">Database Operation</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Parameterized-Queries.html">Parameter</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Selecting-Data.html">Data Select</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Updating-Data.html">Data Update</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Error-Handling.html">Error Handling</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Logging.html">Logging</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Custom-Data-Type.html">Custom data type</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Query-Builder.html">Query Builder</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Schema.html">Schema</a></li>
    <li class="level2 nav-leaf"><a href="../tutorial/Schema-Code-Generation.html">Schema code generation</a></li>
    <li class="level1 nav-header">Reference</li>
    <li class="level2 nav-leaf"><a href="index.html">Intro</a></li>
    <li class="level2 active nav-leaf"><a href="#">Connector</a></li>
  </ul>
  

</nav>

<div id="container">

  
<nav id="page-nav">
  <p class="header"><a href="#">Connector</a></p>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="#connection">Connection</a></li>
    <li class="level2 nav-leaf"><a href="#authentication">Authentication</a></li>
    <li class="level1 nav-node"><a href="#execution">Execution</a></li>
    <li class="level2 nav-leaf"><a href="#statement">Statement</a></li>
    <li class="level2 nav-leaf"><a href="#client-server-preparedstatement">Client/Server PreparedStatement</a></li>
    <li class="level2 nav-leaf"><a href="#resultset">ResultSet</a></li>
    <li class="level1 nav-node"><a href="#transaction">Transaction</a></li>
    <li class="level2 nav-leaf"><a href="#transaction-isolation-level">transaction isolation level</a></li>
    <li class="level2 nav-leaf"><a href="#savepoint">Savepoint</a></li>
    <li class="level1 nav-node"><a href="#utility-commands">Utility Commands</a></li>
    <li class="level2 nav-leaf"><a href="#com-quit">COM QUIT</a></li>
    <li class="level2 nav-leaf"><a href="#com-init-db">COM INIT DB</a></li>
    <li class="level2 nav-leaf"><a href="#com-statistics">COM STATISTICS</a></li>
    <li class="level2 nav-leaf"><a href="#com-ping">COM PING</a></li>
    <li class="level2 nav-leaf"><a href="#com-change-user">COM CHANGE USER</a></li>
    <li class="level2 nav-leaf"><a href="#com-reset-connection">COM RESET CONNECTION</a></li>
    <li class="level2 nav-leaf"><a href="#com-set-option">COM SET OPTION</a></li>
    <li class="level1 nav-node"><a href="#batch-commands">Batch commands</a></li>
    <li class="level2 nav-leaf"><a href="#difference-between-statement-and-preparedstatement">Difference between Statement and PreparedStatement</a></li>
    <li class="level1 nav-leaf"><a href="#stored-procedure-execution">Stored Procedure Execution</a></li>
    <li class="level1 nav-leaf"><a href="#unsupported-feature">Unsupported feature</a></li>
  </ul>

  <p class="footer"></p>
</nav>


  <main class="content">

    <h1 id="connector" class="title">Connector</h1>
    <p>This chapter describes database connections using ldbc&#39;s own MySQL connector.</p>
    <p>To connect to a MySQL database in Scala, you need to use JDBC, which is a standard Java API that can also be used in Scala.
    Since JDBC is implemented in Java, it can only be used in the JVM environment when used in Scala.</p>
    <p>The recent environment surrounding Scala has seen a lot of plugin development to enable Scala to run in JS, Native, and other environments.
    Scala has evolved from a JVM-only language that can use Java assets to a language that can run on multiple platforms.</p>
    <p>However, JDBC is a standard Java API that does not support Scala&#39;s multi-platform behavior.</p>
    <p>Therefore, even if you create an application in Scala to work with JS, Native, etc., you will not be able to connect to MySQL or other databases because you cannot use JDBC.</p>
    <p>The Typelevel Project has a Scala library for <a href="https://www.postgresql.org/">PostgreSQL</a> called <a href="https://github.com/typelevel/skunk">Skunk</a>.
    This project does not use JDBC and uses pure Scala only to connect to PostgreSQL. Therefore, Skunk can be used to connect to PostgreSQL in any JVM, JS, or Native environment.</p>
    <p>The ldbc connector is a Skunk-inspired project that is being developed to enable connections to MySQL in any JVM, JS, or Native environment.</p>
    <p>※ This connector is currently an experimental feature. Therefore, it should not be used in a production environment.</p>
    <p>The ldbc connector is the lowest layer API.
    We plan to use this connector to provide higher-layer APIs in the future. We also plan to make it compatible with existing higher-layer APIs.</p>
    <p>To use this connector, the following dependencies must be set up in your project.</p>
    <p><strong>JVM</strong></p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %% </span><span class="string-literal">&quot;ldbc-connector&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta8&quot;</span></code></pre>
    <p><strong>JS/Native</strong></p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %%% </span><span class="string-literal">&quot;ldbc-connector&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta8&quot;</span></code></pre>
    <p><strong>Supported Versions</strong></p>
    <p>The current version supports the following versions of MySQL</p>
    <ul>
      <li>MySQL 5.7.x</li>
      <li>MySQL 8.x</li>
    </ul>
    <p>The main support is for MySQL 8.x. MySQL 5.7.x is a sub-support. Therefore, be careful when working with MySQL 5.7.x.
    We plan to discontinue support for MySQL 5.7.x in the future.</p>
    
    <h2 id="connection" class="section"><a class="anchor-link left" href="#connection"><i class="icofont-laika link">&#xef71;</i></a>Connection</h2>
    <p>Connection` is used to connect to MySQL using the ldbc connector.</p>
    <p>In addition, <code>Connection</code> can use <code>Otel4s</code> to collect telemetry data so that it can be developed with obserbability in mind.
    Therefore, when using <code>Connection</code>, the <code>Tracer</code> of <code>Otel4s</code> must be configured.</p>
    <p>It is recommended to use <code>Tracer.noop</code> during development or if you do not need telemetry data using tracing.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.</span><span class="type-name">IO</span><span>
</span><span class="keyword">import</span><span> </span><span class="identifier">org</span><span>.</span><span class="identifier">typelevel</span><span>.</span><span class="identifier">otel4s</span><span>.</span><span class="identifier">trace</span><span>.</span><span class="type-name">Tracer</span><span>
</span><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">connector</span><span>.</span><span class="type-name">Connection</span><span>

</span><span class="keyword">given</span><span> </span><span class="type-name">Tracer</span><span>[</span><span class="type-name">IO</span><span>] = </span><span class="type-name">Tracer</span><span>.</span><span class="identifier">noop</span><span>[</span><span class="type-name">IO</span><span>]

</span><span class="keyword">val</span><span> </span><span class="identifier">connection</span><span> = </span><span class="type-name">Connection</span><span>[</span><span class="type-name">IO</span><span>](
  </span><span class="identifier">host</span><span> = </span><span class="string-literal">&quot;127.0.0.1&quot;</span><span>,
  </span><span class="identifier">port</span><span> = </span><span class="number-literal">3306</span><span>,
  </span><span class="identifier">user</span><span> = </span><span class="string-literal">&quot;root&quot;</span><span>,
)</span></code></pre>
    <p>The following is a list of properties that can be set when constructing a `Connection</p>
    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Type</th>
          <th>Use</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>host</code></td>
          <td><code>String</code></td>
          <td><code>Specify the host for the MySQL server</code></td>
        </tr>
        <tr>
          <td><code>port</code></td>
          <td><code>Int</code></td>
          <td><code>Specify the port number of the MySQL server</code></td>
        </tr>
        <tr>
          <td><code>user</code></td>
          <td><code>String</code></td>
          <td><code>Specify the user name to log in to the MySQL server.</code></td>
        </tr>
        <tr>
          <td><code>password</code></td>
          <td><code>Option[String]</code></td>
          <td><code>Specify the password of the user who will log in to the MySQL server.</code></td>
        </tr>
        <tr>
          <td><code>database</code></td>
          <td><code>Option[String]</code></td>
          <td><code>Specify the database name to be used after connecting to the MySQL server</code></td>
        </tr>
        <tr>
          <td><code>debug</code></td>
          <td><code>Boolean</code></td>
          <td><code>Outputs a log of the process. Default is false.</code></td>
        </tr>
        <tr>
          <td><code>ssl</code></td>
          <td><code>SSL</code></td>
          <td><code>Specifies whether SSL/TLS is used for notifications to and from the MySQL server. The default is SSL.None.</code></td>
        </tr>
        <tr>
          <td><code>socketOptions</code></td>
          <td><code>List[SocketOption]</code></td>
          <td><code>Specifies socket options for TCP/UDP sockets.</code></td>
        </tr>
        <tr>
          <td><code>readTimeout</code></td>
          <td><code>Duration</code></td>
          <td><code>Specifies the timeout before an attempt is made to connect to the MySQL server. Default is Duration.Inf.</code></td>
        </tr>
        <tr>
          <td><code>allowPublicKeyRetrieval</code></td>
          <td><code>Boolean</code></td>
          <td><code>Specifies whether to use the RSA public key when authenticating with the MySQL server. Default is false.</code></td>
        </tr>
      </tbody>
    </table>
    <p>Connection<code>uses</code>Resource<code>to manage resources. Therefore, when connection information is used, the</code>use` method is used to manage the resource.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="comment">// コードを記述
</span><span>}</span></code></pre>
    
    <h3 id="authentication" class="section"><a class="anchor-link left" href="#authentication"><i class="icofont-laika link">&#xef71;</i></a>Authentication</h3>
    <p>Authentication in MySQL involves the client sending user information in a phase called LoginRequest when connecting to the MySQL server. The server then looks up the user in the <code>mysql.user</code> table to determine which authentication plugin to use. After the authentication plugin is determined, the server calls the plugin to initiate user authentication and sends the results to the client side. In this way, authentication is pluggable in MySQL.</p>
    <p>The authentication plug-ins supported by MySQL are listed on the <a href="https://dev.mysql.com/doc/refman/8.0/ja/authentication-plugins.html">official page</a>.</p>
    <p>ldbc currently supports the following authentication plug-ins</p>
    <ul>
      <li>Native Pluggable Authentication</li>
      <li>SHA-256 Pluggable Authentication</li>
      <li>SHA-2 Cached Pluggable Authentication</li>
    </ul>
    <p>※ Native pluggable authentication and SHA-256 pluggable authentication are plugins that have been deprecated since MySQL 8.x. It is recommended that you use the SHA-2 pluggable authentication cache unless you have a good reason to do otherwise.</p>
    <p>There is no need to be aware of authentication plug-ins in the ldbc application code. Users simply create a user created with the authentication plugin they wish to use on the MySQL database and then attempt to connect to MySQL using that user in the ldbc application code.
    ldbc will internally determine the authentication plugin and use the appropriate authentication plugin to connect to MySQL.</p>
    
    <h2 id="execution" class="section"><a class="anchor-link left" href="#execution"><i class="icofont-laika link">&#xef71;</i></a>Execution</h2>
    <p>The following tables are assumed to be used in the subsequent process.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">CREATE</span><span> </span><span class="keyword">TABLE</span><span> </span><span class="identifier">users</span><span> (
  </span><span class="identifier">id</span><span> </span><span class="type-name">BIGINT</span><span> </span><span class="identifier">AUTO_INCREMENT</span><span> </span><span class="keyword">PRIMARY</span><span> </span><span class="keyword">KEY</span><span>,
  </span><span class="identifier">name</span><span> </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">255</span><span>) </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">age</span><span> </span><span class="type-name">INT</span><span> </span><span class="literal-value">NULL</span><span>
);</span></code></pre>
    
    <h3 id="statement" class="section"><a class="anchor-link left" href="#statement"><i class="icofont-laika link">&#xef71;</i></a>Statement</h3>
    <p><code>Statement</code> is an API for executing SQL without dynamic parameters.</p>
    <p>※ Since <code>Statement</code> does not use dynamic parameters, there is a risk of SQL injection depending on its usage. Therefore, it is recommended to use <code>PreparedStatement</code> when dynamic parameters are used.</p>
    <p>Construct a <code>Statement</code> using the <code>createStatement</code> method of <code>Connection</code>.</p>
    
    <h4 id="read-query-1" class="section"><a class="anchor-link left" href="#read-query-1"><i class="icofont-laika link">&#xef71;</i></a>Read Query</h4>
    <p>Use the <code>executeQuery</code> method to execute read-only SQL.</p>
    <p>The value returned by the MySQL server as a result of executing the query is stored in a <code>ResultSet</code> and returned as a return value.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">createStatement</span><span>()
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeQuery</span><span>(</span><span class="string-literal">&quot;SELECT * FROM users&quot;</span><span>)
  </span><span class="keyword">yield</span><span>
    </span><span class="comment">// Processing with ResultSet
</span><span>}</span></code></pre>
    
    <h4 id="write-query-1" class="section"><a class="anchor-link left" href="#write-query-1"><i class="icofont-laika link">&#xef71;</i></a>Write Query</h4>
    <p>Use the <code>executeUpdate</code> method to execute the SQL to be written.</p>
    <p>The value returned by the MySQL server as a result of executing the query is the number of rows affected.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">createStatement</span><span>()
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeUpdate</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20)&quot;</span><span>)
  </span><span class="keyword">yield</span><span>
}</span></code></pre>
    
    <h4 id="get-the-value-of-auto_increment-1" class="section"><a class="anchor-link left" href="#get-the-value-of-auto_increment-1"><i class="icofont-laika link">&#xef71;</i></a>Get the value of AUTO_INCREMENT</h4>
    <p>If you want to get the value of AUTO_INCREMENT after executing a query using <code>Statement</code>, use the method <code>getGeneratedKeys</code>.</p>
    <p>The value returned by the MySQL server as a result of executing the query will be the value generated for AUTO_INCREMENT as the return value.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">createStatement</span><span>()
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeUpdate</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20)&quot;</span><span>, </span><span class="type-name">Statement</span><span>.</span><span class="type-name">RETURN_GENERATED_KEYS</span><span>)
    </span><span class="identifier">gereatedKeys</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">getGeneratedKeys</span><span>()
  </span><span class="keyword">yield</span><span>
}</span></code></pre>
    
    <h3 id="client-server-preparedstatement" class="section"><a class="anchor-link left" href="#client-server-preparedstatement"><i class="icofont-laika link">&#xef71;</i></a>Client/Server PreparedStatement</h3>
    <p>ldbc provides <code>PreparedStatement</code> divided into <code>Client PreparedStatement</code> and <code>Server PreparedStatement</code>.</p>
    <p>The <code>Client PreparedStatement</code> is an API for constructing SQL on the application using dynamic parameters and sending it to the MySQL server.
    Therefore, the method of sending queries to the MySQL server is the same as for <code>Statement</code>.</p>
    <p>This API is equivalent to JDBC&#39;s <code>PreparedStatement</code>.</p>
    <p>Use the <code>Server PreparedStatement</code> for building queries in the MySQL server, which is more secure.</p>
    <p>The <code>Server PreparedStatement</code> allows queries to be reused since the query to be executed and parameters are sent separately.</p>
    <p>When using <code>Server PreparedStatement</code>, the query is prepared in advance by the MySQL server. Although the MySQL server uses memory to store them, the queries can be reused, which improves performance.</p>
    <p>However, there is a risk of memory leaks because the pre-prepared queries will continue to use memory until they are freed.</p>
    <p>If you use <code>Server PreparedStatement</code>, you must use the <code>close</code> method to properly release the query.</p>
    
    <h4 id="client-preparedstatement" class="section"><a class="anchor-link left" href="#client-preparedstatement"><i class="icofont-laika link">&#xef71;</i></a>Client PreparedStatement</h4>
    <p>Construct a <code>Client PreparedStatement</code> using the <code>ClientPreparedStatement</code> method of <code>Connection</code>.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span>)
    ...
  </span><span class="keyword">yield</span><span> ...
}</span></code></pre>
    
    <h4 id="server-preparedstatement" class="section"><a class="anchor-link left" href="#server-preparedstatement"><i class="icofont-laika link">&#xef71;</i></a>Server PreparedStatement</h4>
    <p>Construct a <code>Server PreparedStatement</code> using the <code>Connection</code> <code>serverPreparedStatement</code> method.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">serverPreparedStatement</span><span>(</span><span class="string-literal">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span>)
    ...
  </span><span class="keyword">yield</span><span> ...
}</span></code></pre>
    
    <h4 id="read-query-2" class="section"><a class="anchor-link left" href="#read-query-2"><i class="icofont-laika link">&#xef71;</i></a>Read Query</h4>
    <p>Use the <code>executeQuery</code> method to execute read-only SQL.</p>
    <p>The value returned by the MySQL server as a result of executing the query is stored in a <code>ResultSet</code> and returned as a return value.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span>) </span><span class="comment">// or conn.serverPreparedStatement(&quot;SELECT * FROM users WHERE id = ?&quot;)
</span><span>    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setLong</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>)
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeQuery</span><span>()
  </span><span class="keyword">yield</span><span>
    </span><span class="comment">// Processing with ResultSet
</span><span>}</span></code></pre>
    <p>If you want to use dynamic parameters, use the <code>setXXX</code> method to set the parameters.
    The <code>setXXX</code> method can also use the <code>Option</code> type. If <code>None</code> is passed, the parameter will be set to NULL.</p>
    <p>The <code>setXXX</code> method specifies the index of the parameter and the value of the parameter.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">statement</span><span>.</span><span class="identifier">setLong</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>)</span></code></pre>
    <p>The following methods are supported in the current version</p>
    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>Type</th>
          <th>Note</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>setNull</code></td>
          <td></td>
          <td>Set the parameter to NULL</td>
        </tr>
        <tr>
          <td><code>setBoolean</code></td>
          <td><code>Boolean/Option[Boolean]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setByte</code></td>
          <td><code>Byte/Option[Byte]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setShort</code></td>
          <td><code>Short/Option[Short]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setInt</code></td>
          <td><code>Int/Option[Int]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setLong</code></td>
          <td><code>Long/Option[Long]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setBigInt</code></td>
          <td><code>BigInt/Option[BigInt]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setFloat</code></td>
          <td><code>Float/Option[Float]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setDouble</code></td>
          <td><code>Double/Option[Double]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setBigDecimal</code></td>
          <td><code>BigDecimal/Option[BigDecimal]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setString</code></td>
          <td><code>String/Option[String]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setBytes</code></td>
          <td><code>Array[Byte]/Option[Array[Byte]]</code></td>
          <td></td>
        </tr>
        <tr>
          <td><code>setDate</code></td>
          <td><code>LocalDate/Option[LocalDate]</code></td>
          <td>Directly handle <code>java.time</code> instead of <code>java.sql</code>.</td>
        </tr>
        <tr>
          <td><code>setTime</code></td>
          <td><code>LocalTime/Option[LocalTime]</code></td>
          <td>Directly handle <code>java.time</code> instead of <code>java.sql</code>.</td>
        </tr>
        <tr>
          <td><code>setTimestamp</code></td>
          <td><code>LocalDateTime/Option[LocalDateTime]</code></td>
          <td>Directly handle <code>java.time</code> instead of <code>java.sql</code>.</td>
        </tr>
        <tr>
          <td><code>setYear</code></td>
          <td><code>Year/Option[Year]</code></td>
          <td>Directly handle <code>java.time</code> instead of <code>java.sql</code>.</td>
        </tr>
      </tbody>
    </table>
    
    <h4 id="write-query-2" class="section"><a class="anchor-link left" href="#write-query-2"><i class="icofont-laika link">&#xef71;</i></a>Write Query</h4>
    <p>Use the <code>executeUpdate</code> method to execute the SQL to be written.</p>
    <p>The value returned by the MySQL server as a result of executing the query is the number of rows affected.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span>) </span><span class="comment">// or conn.serverPreparedStatement(&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;)
</span><span>    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;Alice&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">20</span><span>)
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeUpdate</span><span>()
  </span><span class="keyword">yield</span><span> </span><span class="identifier">result</span><span>
}</span></code></pre>
    
    <h4 id="get-the-value-of-auto_increment-2" class="section"><a class="anchor-link left" href="#get-the-value-of-auto_increment-2"><i class="icofont-laika link">&#xef71;</i></a>Get the value of AUTO_INCREMENT</h4>
    <p>To get the value of AUTO_INCREMENT after executing a query, use the <code>getGeneratedKeys</code> method.</p>
    <p>The value returned by the MySQL server as a result of executing the query will be the value generated for AUTO_INCREMENT as the return value.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span>, </span><span class="type-name">Statement</span><span>.</span><span class="type-name">RETURN_GENERATED_KEYS</span><span>) </span><span class="comment">// or conn.serverPreparedStatement(&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;, Statement.RETURN_GENERATED_KEYS)
</span><span>    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;Alice&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">20</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeUpdate</span><span>()
    </span><span class="identifier">getGeneratedKeys</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">getGeneratedKeys</span><span>()
  </span><span class="keyword">yield</span><span> </span><span class="identifier">getGeneratedKeys</span><span>
}</span></code></pre>
    
    <h3 id="resultset" class="section"><a class="anchor-link left" href="#resultset"><i class="icofont-laika link">&#xef71;</i></a>ResultSet</h3>
    <p>The <code>ResultSet</code> is an API for storing values returned by the MySQL server after query execution.</p>
    <p>There are two ways to retrieve records retrieved by executing SQL from <code>ResultSet</code>: using the <code>next</code> and <code>getXXX</code> methods as in JDBC, or using ldbc&#39;s own <code>decode</code> method.</p>
    
    <h4 id="next-getxxx" class="section"><a class="anchor-link left" href="#next-getxxx"><i class="icofont-laika link">&#xef71;</i></a>next/getXXX</h4>
    <p>The <code>next</code> method returns <code>true</code> if the next record exists, or <code>false</code> if the next record does not exist.</p>
    <p>The <code>getXXX</code> method is an API for retrieving values from records.</p>
    <p>The <code>getXXX</code> method can be used either by specifying the index of the column to be retrieved or by specifying the column name.</p>
    <pre><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;SELECT `id`, `name`, `age` FROM users WHERE id = ?&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setLong</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>)
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeQuery</span><span>()
    </span><span class="identifier">records</span><span> &lt;- </span><span class="type-name">Monad</span><span>[</span><span class="type-name">IO</span><span>].</span><span class="identifier">whileM</span><span>(</span><span class="identifier">result</span><span>.</span><span class="identifier">next</span><span>()) {
      </span><span class="keyword">for</span><span>
        </span><span class="identifier">id</span><span> &lt;- </span><span class="identifier">result</span><span>.</span><span class="identifier">getLong</span><span>(</span><span class="number-literal">1</span><span>)
        </span><span class="identifier">name</span><span> &lt;- </span><span class="identifier">result</span><span>.</span><span class="identifier">getString</span><span>(</span><span class="string-literal">&quot;name&quot;</span><span>)
        </span><span class="identifier">age</span><span> &lt;- </span><span class="identifier">result</span><span>.</span><span class="identifier">getInt</span><span>(</span><span class="number-literal">3</span><span>)  
      </span><span class="keyword">yield</span><span> (</span><span class="identifier">id</span><span>, </span><span class="identifier">name</span><span>, </span><span class="identifier">age</span><span>)
  }
  </span><span class="keyword">yield</span><span> </span><span class="identifier">records</span><span>
}</span></code></pre>
    
    <h4 id="decode" class="section"><a class="anchor-link left" href="#decode"><i class="icofont-laika link">&#xef71;</i></a>decode</h4>
    <p>The <code>decode</code> method is an API for converting values retrieved from a <code>ResultSet</code> to a Scala type.</p>
    <p>The type to be converted is specified using the <code>*:</code> operator depending on the number of columns to be retrieved.</p>
    <p>The example shows how to retrieve the id, name, and age columns of the users table, specifying the type of each column.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">result</span><span>.</span><span class="identifier">decode</span><span>(</span><span class="identifier">bigint</span><span> *: </span><span class="identifier">varchar</span><span> *: </span><span class="identifier">int</span><span>.</span><span class="identifier">opt</span><span>)</span></code></pre>
    <p>If you want to get a NULL-allowed column, use the <code>opt</code> method to convert it to the <code>Option</code> type.
    If the record is NULL, it can be retrieved as None.</p>
    <p>The sequence of events from query execution to record retrieval is as follows</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span> 
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span>) </span><span class="comment">// or conn.serverPreparedStatement(&quot;SELECT * FROM users WHERE id = ?&quot;)
</span><span>    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setLong</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>)
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeQuery</span><span>()
    </span><span class="identifier">decodes</span><span> &lt;- </span><span class="identifier">result</span><span>.</span><span class="identifier">decode</span><span>(</span><span class="identifier">bigint</span><span> *: </span><span class="identifier">varchar</span><span> *: </span><span class="identifier">int</span><span>.</span><span class="identifier">opt</span><span>)
  </span><span class="keyword">yield</span><span> </span><span class="identifier">decodes</span><span>
}</span></code></pre>
    <p>The records retrieved from a <code>ResultSet</code> will always be an array.
    This is because a query in MySQL may always return multiple records.</p>
    <p>If you want to retrieve a single record, use the <code>head</code> or <code>headOption</code> method after the <code>decode</code> process.</p>
    <p>The following data types are supported in the current version</p>
    <table>
      <thead>
        <tr>
          <th>Codec</th>
          <th>Data Type</th>
          <th>Scala Type</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>boolean</code></td>
          <td><code>BOOLEAN</code></td>
          <td><code>Boolean</code></td>
        </tr>
        <tr>
          <td><code>tinyint</code></td>
          <td><code>TINYINT</code></td>
          <td><code>Byte</code></td>
        </tr>
        <tr>
          <td><code>utinyint</code></td>
          <td><code>unsigned TINYINT</code></td>
          <td><code>Short</code></td>
        </tr>
        <tr>
          <td><code>smallint</code></td>
          <td><code>SMALLINT</code></td>
          <td><code>Short</code></td>
        </tr>
        <tr>
          <td><code>usmallint</code></td>
          <td><code>unsigned SMALLINT</code></td>
          <td><code>Int</code></td>
        </tr>
        <tr>
          <td><code>int</code></td>
          <td><code>INT</code></td>
          <td><code>Int</code></td>
        </tr>
        <tr>
          <td><code>uint</code></td>
          <td><code>unsigned INT</code></td>
          <td><code>Long</code></td>
        </tr>
        <tr>
          <td><code>bigint</code></td>
          <td><code>BIGINT</code></td>
          <td><code>Long</code></td>
        </tr>
        <tr>
          <td><code>ubigint</code></td>
          <td><code>unsigned BIGINT</code></td>
          <td><code>BigInt</code></td>
        </tr>
        <tr>
          <td><code>float</code></td>
          <td><code>FLOAT</code></td>
          <td><code>Float</code></td>
        </tr>
        <tr>
          <td><code>double</code></td>
          <td><code>DOUBLE</code></td>
          <td><code>Double</code></td>
        </tr>
        <tr>
          <td><code>decimal</code></td>
          <td><code>DECIMAL</code></td>
          <td><code>BigDecimal</code></td>
        </tr>
        <tr>
          <td><code>char</code></td>
          <td><code>CHAR</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>varchar</code></td>
          <td><code>VARCHAR</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>binary</code></td>
          <td><code>BINARY</code></td>
          <td><code>Array[Byte]</code></td>
        </tr>
        <tr>
          <td><code>varbinary</code></td>
          <td><code>VARBINARY</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>tinyblob</code></td>
          <td><code>TINYBLOB</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>blob</code></td>
          <td><code>BLOB</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>mediumblob</code></td>
          <td><code>MEDIUMBLOB</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>longblob</code></td>
          <td><code>LONGBLOB</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>tinytext</code></td>
          <td><code>TINYTEXT</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>text</code></td>
          <td><code>TEXT</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>mediumtext</code></td>
          <td><code>MEDIUMTEXT</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>longtext</code></td>
          <td><code>LONGTEXT</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>enum</code></td>
          <td><code>ENUM</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>set</code></td>
          <td><code>SET</code></td>
          <td><code>List[String]</code></td>
        </tr>
        <tr>
          <td><code>json</code></td>
          <td><code>JSON</code></td>
          <td><code>String</code></td>
        </tr>
        <tr>
          <td><code>date</code></td>
          <td><code>DATE</code></td>
          <td><code>LocalDate</code></td>
        </tr>
        <tr>
          <td><code>time</code></td>
          <td><code>TIME</code></td>
          <td><code>LocalTime</code></td>
        </tr>
        <tr>
          <td><code>timetz</code></td>
          <td><code>TIME</code></td>
          <td><code>OffsetTime</code></td>
        </tr>
        <tr>
          <td><code>datetime</code></td>
          <td><code>DATETIME</code></td>
          <td><code>LocalDateTime</code></td>
        </tr>
        <tr>
          <td><code>timestamp</code></td>
          <td><code>TIMESTAMP</code></td>
          <td><code>LocalDateTime</code></td>
        </tr>
        <tr>
          <td><code>timestamptz</code></td>
          <td><code>TIMESTAMP</code></td>
          <td><code>OffsetDateTime</code></td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td><code>YEAR</code></td>
          <td><code>Year</code></td>
        </tr>
      </tbody>
    </table>
    <p>※ Currently, it is designed to retrieve values by specifying the MySQL data type, but in the future it may be changed to a more concise Scala type to retrieve values.</p>
    <p>The following data types are not supported</p>
    <ul>
      <li>GEOMETRY</li>
      <li>POINT</li>
      <li>LINESTRING</li>
      <li>POLYGON</li>
      <li>MULTIPOINT</li>
      <li>MULTILINESTRING</li>
      <li>MULTIPOLYGON</li>
      <li>GEOMETRYCOLLECTION</li>
    </ul>
    
    <h2 id="transaction" class="section"><a class="anchor-link left" href="#transaction"><i class="icofont-laika link">&#xef71;</i></a>Transaction</h2>
    <p>To execute a transaction using <code>Connection</code>, use the <code>setAutoCommit</code> method in combination with the <code>commit</code> and <code>rollback</code> methods.</p>
    <p>First, use the <code>setAutoCommit</code> method to disable autocommit for a transaction.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">conn</span><span>.</span><span class="identifier">setAutoCommit</span><span>(</span><span class="boolean-literal">false</span><span>)</span></code></pre>
    <p>Use the <code>commit</code> method to commit the transaction after some processing.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">for</span><span>
  </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;Alice&quot;</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">20</span><span>)
  </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeUpdate</span><span>()
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">commit</span><span>()
</span><span class="keyword">yield</span></code></pre>
    <p>Or use the <code>rollback</code> method to roll back the transaction.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">for</span><span>
  </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;Alice&quot;</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">20</span><span>)
  </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeUpdate</span><span>()
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">rollback</span><span>()
</span><span class="keyword">yield</span></code></pre>
    <p>If transaction autocommit is disabled using the <code>setAutoCommit</code> method, rollback will occur automatically when the connection&#39;s Resource is released.</p>
    
    <h3 id="transaction-isolation-level" class="section"><a class="anchor-link left" href="#transaction-isolation-level"><i class="icofont-laika link">&#xef71;</i></a>transaction isolation level</h3>
    <p>ldbc allows you to set the transaction isolation level.</p>
    <p>Transaction isolation levels are set using the <code>setTransactionIsolation</code> method.</p>
    <p>The following transaction isolation levels are supported in MySQL</p>
    <ul>
      <li>READ UNCOMMITTED</li>
      <li>READ COMMITTED</li>
      <li>REPEATABLE READ</li>
      <li>SERIALIZABLE</li>
    </ul>
    <p>See <a href="https://dev.mysql.com/doc/refman/8.0/ja/innodb-transaction-isolation-levels.html">official documentation</a> for more information on transaction isolation levels in MySQL.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">connector</span><span>.</span><span class="type-name">Connection</span><span>.</span><span class="type-name">TransactionIsolationLevel</span><span>

</span><span class="identifier">conn</span><span>.</span><span class="identifier">setTransactionIsolation</span><span>(</span><span class="type-name">TransactionIsolationLevel</span><span>.</span><span class="type-name">REPEATABLE_READ</span><span>)</span></code></pre>
    <p>Use the <code>getTransactionIsolation</code> method to get the currently set transaction isolation level.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">for</span><span>
  </span><span class="identifier">isolationLevel</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">getTransactionIsolation</span><span>()
</span><span class="keyword">yield</span></code></pre>
    
    <h3 id="savepoint" class="section"><a class="anchor-link left" href="#savepoint"><i class="icofont-laika link">&#xef71;</i></a>Savepoint</h3>
    <p>For more advanced transaction management, the “Savepoint feature” can be used. This allows you to mark a specific point during a database operation so that if something goes wrong, you can rewind the database state back to that point. This is especially useful for complex database operations or when you need to set a safe point in a long transaction.</p>
    <p><strong>Feature：</strong></p>
    <ul>
      <li>Flexible Transaction Management: Use Savepoint to create a “checkpoint” anywhere within a transaction. State can be returned to that point as needed.</li>
      <li>Error Recovery: Save time and increase efficiency by going back to the last safe Savepoint when an error occurs, rather than starting all over.</li>
      <li>Advanced Control: Multiple Savepoints can be configured for more precise transaction control. Developers can easily implement more complex logic and error handling.</li>
    </ul>
    <p>By taking advantage of this feature, your application will be able to achieve more robust and reliable database operations.</p>
    <p><strong>Savepoint Settings</strong></p>
    <p>To set a Savepoint, use the <code>setSavepoint</code> method. This method allows you to specify a name for the Savepoint.
    If you do not specify a name for the Savepoint, the value generated by the UUID will be set as the default name.</p>
    <p>The <code>getSavepointName</code> method can be used to obtain the name of the configured Savepoint.</p>
    <p>※ Since autocommit is enabled by default in MySQL, you must disable autocommit when using Savepoint. Otherwise, all operations will be committed each time, and it will not be possible to roll back transactions using Savepoint.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">for</span><span>
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">setAutoCommit</span><span>(</span><span class="boolean-literal">false</span><span>)
  </span><span class="identifier">savepoint</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">setSavepoint</span><span>(</span><span class="string-literal">&quot;savepoint1&quot;</span><span>)
</span><span class="keyword">yield</span><span> </span><span class="identifier">savepoint</span><span>.</span><span class="identifier">getSavepointName</span></code></pre>
    <p><strong>Rollback of Savepoint</strong></p>
    <p>To roll back a part of a transaction using Savepoint, rollback is performed by passing Savepoint to the <code>rollback</code> method.
    If you commit the entire transaction after a partial rollback using Savepoint, the transaction after that Savepoint will not be committed.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">for</span><span>
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">setAutoCommit</span><span>(</span><span class="boolean-literal">false</span><span>)
  </span><span class="identifier">savepoint</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">setSavepoint</span><span>(</span><span class="string-literal">&quot;savepoint1&quot;</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">rollback</span><span>(</span><span class="identifier">savepoint</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">commit</span><span>()
</span><span class="keyword">yield</span></code></pre>
    <p><strong>Savepoint Release</strong></p>
    <p>To release a Savepoint, pass the Savepoint to the <code>releaseSavepoint</code> method.
    After releasing a Savepoint, commit the entire transaction and the transactions after that Savepoint will be committed.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">for</span><span>
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">setAutoCommit</span><span>(</span><span class="boolean-literal">false</span><span>)
  </span><span class="identifier">savepoint</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">setSavepoint</span><span>(</span><span class="string-literal">&quot;savepoint1&quot;</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">releaseSavepoint</span><span>(</span><span class="identifier">savepoint</span><span>)
  </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">commit</span><span>()
</span><span class="keyword">yield</span></code></pre>
    
    <h2 id="utility-commands" class="section"><a class="anchor-link left" href="#utility-commands"><i class="icofont-laika link">&#xef71;</i></a>Utility Commands</h2>
    <p>MySQL has several utility commands. (<a href="https://dev.mysql.com/doc/dev/mysql-server/latest/page_protocol_command_phase_utility.html">see</a>)</p>
    <p>ldbc provides an API to use these commands.</p>
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Use</th>
          <th>Support</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>COM_QUIT</code></td>
          <td><code>Tells the server that the client is requesting the server to close the connection.</code></td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>COM_INIT_DB</code></td>
          <td><code>Change the default schema for the connection</code></td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>COM_STATISTICS</code></td>
          <td><code>Obtain an internal status string in readable format.</code></td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>COM_DEBUG</code></td>
          <td><code>Dump debugging information to the server&#39;s standard output</code></td>
          <td>❌</td>
        </tr>
        <tr>
          <td><code>COM_PING</code></td>
          <td><code>Check if the server is alive</code></td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>COM_CHANGE_USER</code></td>
          <td><code>Change the user of the current connection</code></td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>COM_RESET_CONNECTION</code></td>
          <td><code>Reset session state</code></td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>COM_SET_OPTION</code></td>
          <td><code>Set options for the current connection</code></td>
          <td>✅</td>
        </tr>
      </tbody>
    </table>
    
    <h3 id="com-quit" class="section"><a class="anchor-link left" href="#com-quit"><i class="icofont-laika link">&#xef71;</i></a>COM QUIT</h3>
    <p>The <code>COM_QUIT</code> command is used to tell the server that the client is requesting that the connection be closed.</p>
    <p>In ldbc, the <code>close</code> method of <code>Connection</code> can be used to close a connection.
    Because the <code>close</code> method closes the connection, the connection cannot be used in any subsequent process.</p>
    <p>※ The <code>Connection</code> uses <code>Resource</code> to manage resources. Therefore, there is no need to use the <code>close</code> method to release resources.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">close</span><span>()
}</span></code></pre>
    
    <h3 id="com-init-db" class="section"><a class="anchor-link left" href="#com-init-db"><i class="icofont-laika link">&#xef71;</i></a>COM INIT DB</h3>
    <p>The <code>COM_INIT_DB</code> command is used to change the default schema for the connection.</p>
    <p>In ldbc, the default schema can be changed using the <code>setSchema</code> method of <code>Connection</code>.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">setSchema</span><span>(</span><span class="string-literal">&quot;test&quot;</span><span>)
}</span></code></pre>
    
    <h3 id="com-statistics" class="section"><a class="anchor-link left" href="#com-statistics"><i class="icofont-laika link">&#xef71;</i></a>COM STATISTICS</h3>
    <p>The <code>COM_STATISTICS</code> command is used to retrieve internal status strings in readable format.</p>
    <p>In ldbc, you can use the <code>getStatistics</code> method of <code>Connection</code> to get the internal status string.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">getStatistics</span><span>
}</span></code></pre>
    <p>The statuses that can be obtained are as follows</p>
    <ul>
      <li><code>uptime</code> : the time since the server was started</li>
      <li><code>threads</code> : number of clients currently connected.</li>
      <li><code>questions</code> : number of queries since the server started</li>
      <li><code>slowQueries</code> : number of slow queries.</li>
      <li><code>opens</code> : number of table opens since the server started.</li>
      <li><code>flushTables</code> : number of tables flushed since the server started.</li>
      <li><code>openTables</code> : number of tables currently open.</li>
      <li><code>queriesPerSecondAvg</code> : average number of queries per second.</li>
    </ul>
    
    <h3 id="com-ping" class="section"><a class="anchor-link left" href="#com-ping"><i class="icofont-laika link">&#xef71;</i></a>COM PING</h3>
    <p>The <code>COM_PING</code> command is used to check if the server is alive.</p>
    <p>In ldbc, you can check if the server is alive using the <code>isValid</code> method of <code>Connection</code>.
    It returns <code>true</code> if the server is alive, <code>false</code> if not.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">isValid</span><span>
}</span></code></pre>
    
    <h3 id="com-change-user" class="section"><a class="anchor-link left" href="#com-change-user"><i class="icofont-laika link">&#xef71;</i></a>COM CHANGE USER</h3>
    <p>The <code>COM_CHANGE_USER</code> command is used to change the user of the current connection.
    It also resets the following connection states</p>
    <ul>
      <li>User Variables</li>
      <li>Temporary tables</li>
      <li>Prepared statements</li>
      <li>etc...</li>
    </ul>
    <p>In ldbc, the <code>changeUser</code> method of <code>Connection</code> can be used to change the user.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">changeUser</span><span>(</span><span class="string-literal">&quot;root&quot;</span><span>, </span><span class="string-literal">&quot;password&quot;</span><span>)
}</span></code></pre>
    
    <h3 id="com-reset-connection" class="section"><a class="anchor-link left" href="#com-reset-connection"><i class="icofont-laika link">&#xef71;</i></a>COM RESET CONNECTION</h3>
    <p><code>COM_RESET_CONNECTION</code> is a command to reset the session state.</p>
    <p><code>COM_RESET_CONNECTION</code> is a more lightweight version of <code>COM_CHANGE_USER</code>, with almost the same functionality to clean up the session state, but with the following features</p>
    <ul>
      <li>Do not re-authenticate (no extra client/server exchange to do so).</li>
      <li>Do not close the connection.</li>
    </ul>
    <p>In ldbc, you can reset the session state using the <code>resetServerState</code> method of <code>Connection</code>.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">resetServerState</span><span>
}</span></code></pre>
    
    <h3 id="com-set-option" class="section"><a class="anchor-link left" href="#com-set-option"><i class="icofont-laika link">&#xef71;</i></a>COM SET OPTION</h3>
    <p><code>COM_SET_OPTION</code> is a command to set options for the current connection.</p>
    <p>In ldbc, you can use the <code>enableMultiQueries</code> and <code>disableMultiQueries</code> methods of <code>Connection</code> to set options.</p>
    <p>The <code>enableMultiQueries</code> method allows you to run multiple queries at once.
    If you use the <code>disableMultiQueries</code> method, you will not be able to run multiple queries at once.</p>
    <p>※ It can only be used for batch processing with Insert, Update, and Delete statements; if used with a Select statement, only the results of the first query will be returned.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">conn</span><span>.</span><span class="identifier">enableMultiQueries</span><span> *&gt; </span><span class="identifier">conn</span><span>.</span><span class="identifier">disableMultiQueries</span><span>
}</span></code></pre>
    
    <h2 id="batch-commands" class="section"><a class="anchor-link left" href="#batch-commands"><i class="icofont-laika link">&#xef71;</i></a>Batch commands</h2>
    <p>ldbc allows multiple queries to be executed at once using batch commands.
    Using batch commands allows multiple queries to be executed at once, thus reducing the number of network round trips.</p>
    <p>To use batch commands, add queries using the <code>addBatch</code> method of a <code>Statement</code> or <code>PreparedStatement</code> and execute the queries using the <code>executeBatch</code> method.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">createStatement</span><span>()
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Bob&#39;, 30)&quot;</span><span>)
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeBatch</span><span>()
  </span><span class="keyword">yield</span><span> </span><span class="identifier">result</span><span>
}</span></code></pre>
    <p>In the above example, data for <code>Alice</code> and <code>Bob</code> can be added at once.
    The query to be executed would be as follows</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">INSERT</span><span> </span><span class="keyword">INTO</span><span> </span><span class="identifier">users</span><span> (</span><span class="identifier">name</span><span>, </span><span class="identifier">age</span><span>) </span><span class="keyword">VALUES</span><span> (</span><span class="string-literal">&#39;Alice&#39;</span><span>, </span><span class="number-literal">20</span><span>);</span><span class="keyword">INSERT</span><span> </span><span class="keyword">INTO</span><span> </span><span class="identifier">users</span><span> (</span><span class="identifier">name</span><span>, </span><span class="identifier">age</span><span>) </span><span class="keyword">VALUES</span><span> (</span><span class="string-literal">&#39;Bob&#39;</span><span>, </span><span class="number-literal">30</span><span>);</span></code></pre>
    <p>The return value after executing a batch command is an array of the number of rows affected by each query executed.</p>
    <p>In the above example, one row of data for <code>Alice</code> is added and one row of data for <code>Bob</code> is added, so the return value is <code>List(1, 1)</code>.</p>
    <p>After executing the batch command, the queries that have been added so far by the <code>addBatch</code> method will be cleared.</p>
    <p>If you want to clear them manually, use the <code>clearBatch</code> method to do so.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">createStatement</span><span>()
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">clearBatch</span><span>()
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Bob&#39;, 30)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeBatch</span><span>()
  </span><span class="keyword">yield</span><span>
}</span></code></pre>
    <p>In the above example, the data for <code>Alice</code> is not added, but the data for <code>Bob</code> is.</p>
    
    <h3 id="difference-between-statement-and-preparedstatement" class="section"><a class="anchor-link left" href="#difference-between-statement-and-preparedstatement"><i class="icofont-laika link">&#xef71;</i></a>Difference between Statement and PreparedStatement</h3>
    <p>The queries executed by the batch command may differ between a <code>Statement</code> and a <code>PreparedStatement</code>.</p>
    <p>When an INSERT statement is executed in a batch command using a <code>Statement</code>, multiple queries are executed at once.
    However, if you run an INSERT statement in a batch command using a <code>PreparedStatement</code>, a single query will be executed.</p>
    <p>For example, if you run the following query in a batch command, multiple queries will be executed at once because you are using a <code>Statement</code>.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">createStatement</span><span>()
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (&#39;Bob&#39;, 30)&quot;</span><span>)
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeBatch</span><span>()
  </span><span class="keyword">yield</span><span> </span><span class="identifier">result</span><span>
}

</span><span class="comment">// Query to be executed
// INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20);INSERT INTO users (name, age) VALUES (&#39;Bob&#39;, 30);</span></code></pre>
    <p>However, if the following query is executed in a batch command, one query will be executed because of the use of <code>PreparedStatement</code>.</p>
    <pre><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">statement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">clientPreparedStatement</span><span>(</span><span class="string-literal">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;Alice&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">20</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>()
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;Bob&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">30</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">addBatch</span><span>()
    </span><span class="identifier">result</span><span> &lt;- </span><span class="identifier">statement</span><span>.</span><span class="identifier">executeBatch</span><span>()
  </span><span class="keyword">yield</span><span> </span><span class="identifier">result</span><span>
}

</span><span class="comment">// Query to be executed
// INSERT INTO users (name, age) VALUES (&#39;Alice&#39;, 20), (&#39;Bob&#39;, 30);</span></code></pre>
    <p>This is because if you are using <code>PreparedStatement</code>, you can set multiple parameters for a single query by using the <code>addBatch</code> method after setting the query parameters.</p>
    
    <h2 id="stored-procedure-execution" class="section"><a class="anchor-link left" href="#stored-procedure-execution"><i class="icofont-laika link">&#xef71;</i></a>Stored Procedure Execution</h2>
    <p>ldbc provides an API for executing stored procedures.</p>
    <p>To execute a stored procedure, use the <code>prepareCall</code> method of <code>Connection</code> to construct a <code>CallableStatement</code>.</p>
    <p>※ The stored procedures used are those described in the <a href="https://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-statements-callable.html">official</a> document.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">CREATE</span><span> </span><span class="keyword">PROCEDURE</span><span> </span><span class="identifier">demoSp</span><span>(</span><span class="keyword">IN</span><span> </span><span class="identifier">inputParam</span><span> </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">255</span><span>), </span><span class="identifier">INOUT</span><span> </span><span class="identifier">inOutParam</span><span> </span><span class="type-name">INT</span><span>)
</span><span class="keyword">BEGIN</span><span>
    </span><span class="keyword">DECLARE</span><span> </span><span class="identifier">z</span><span> </span><span class="type-name">INT</span><span>;
    </span><span class="keyword">SET</span><span> </span><span class="identifier">z</span><span> = </span><span class="identifier">inOutParam</span><span> + </span><span class="number-literal">1</span><span>;
    </span><span class="keyword">SET</span><span> </span><span class="identifier">inOutParam</span><span> = </span><span class="identifier">z</span><span>;

    </span><span class="keyword">SELECT</span><span> </span><span class="identifier">inputParam</span><span>;

    </span><span class="keyword">SELECT</span><span> </span><span class="identifier">CONCAT</span><span>(</span><span class="string-literal">&#39;zyxw&#39;</span><span>, </span><span class="identifier">inputParam</span><span>);
</span><span class="keyword">END</span></code></pre>
    <p>To execute the above stored procedure, the following would be used</p>
    <pre><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">callableStatement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">prepareCall</span><span>(</span><span class="string-literal">&quot;CALL demoSp(?, ?)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;abcdefg&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">1</span><span>)
    </span><span class="identifier">hasResult</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">execute</span><span>()
    </span><span class="identifier">values</span><span> &lt;- </span><span class="type-name">Monad</span><span>[</span><span class="type-name">IO</span><span>].</span><span class="identifier">whileM</span><span>[</span><span class="type-name">List</span><span>, </span><span class="type-name">Option</span><span>[</span><span class="type-name">String</span><span>]](</span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">getMoreResults</span><span>()) {
      </span><span class="keyword">for</span><span>
        </span><span class="identifier">resultSet</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">getResultSet</span><span>().</span><span class="identifier">flatMap</span><span> {
          </span><span class="keyword">case</span><span> </span><span class="type-name">Some</span><span>(</span><span class="identifier">rs</span><span>) =&gt; </span><span class="type-name">IO</span><span>.</span><span class="identifier">pure</span><span>(</span><span class="identifier">rs</span><span>)
          </span><span class="keyword">case</span><span> </span><span class="type-name">None</span><span>     =&gt; </span><span class="type-name">IO</span><span>.</span><span class="identifier">raiseError</span><span>(</span><span class="keyword">new</span><span> </span><span class="type-name">Exception</span><span>(</span><span class="string-literal">&quot;No result set&quot;</span><span>))
        }
        </span><span class="identifier">value</span><span> &lt;- </span><span class="identifier">resultSet</span><span>.</span><span class="identifier">getString</span><span>(</span><span class="number-literal">1</span><span>)
      </span><span class="keyword">yield</span><span> </span><span class="identifier">value</span><span>
    }
  </span><span class="keyword">yield</span><span> </span><span class="identifier">values</span><span> </span><span class="comment">// List(Some(&quot;abcdefg&quot;), Some(&quot;zyxwabcdefg&quot;))
</span><span>}</span></code></pre>
    <p>To get the value of an output parameter (a parameter you specified as OUT or INOUT when you created the stored procedure), JDBC requires you to specify the parameter before statement execution using the various <code>registerOutputParameter()</code> methods of the CallableStatement interface. to specify parameters before statement execution, while ldbc will also set parameters during query execution by simply setting them using the <code>setXXX</code> method.</p>
    <p>However, ldbc also allows you to specify parameters using the <code>registerOutputParameter()</code> method.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="keyword">for</span><span>
    </span><span class="identifier">callableStatement</span><span> &lt;- </span><span class="identifier">conn</span><span>.</span><span class="identifier">prepareCall</span><span>(</span><span class="string-literal">&quot;CALL demoSp(?, ?)&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">setString</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="string-literal">&quot;abcdefg&quot;</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">setInt</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="number-literal">1</span><span>)
    </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">registerOutParameter</span><span>(</span><span class="number-literal">2</span><span>, </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">connector</span><span>.</span><span class="identifier">data</span><span>.</span><span class="type-name">Types</span><span>.</span><span class="type-name">INTEGER</span><span>)
    </span><span class="identifier">hasResult</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">execute</span><span>()
    </span><span class="identifier">value</span><span> &lt;- </span><span class="identifier">callableStatement</span><span>.</span><span class="identifier">getInt</span><span>(</span><span class="number-literal">2</span><span>)
  </span><span class="keyword">yield</span><span> </span><span class="identifier">value</span><span> </span><span class="comment">// 2
</span><span>}</span></code></pre>
    <p>※ Note that if you specify an Out parameter with <code>registerOutParameter</code>, the value will be set at <code>Null</code> for the server if the parameter is not set with the <code>setXXX</code> method using the same index value.</p>
    
    <h2 id="unsupported-feature" class="section"><a class="anchor-link left" href="#unsupported-feature"><i class="icofont-laika link">&#xef71;</i></a>Unsupported feature</h2>
    <p>The ldbc connector is currently an experimental feature. Therefore, the following features are not supported.
    We plan to provide the functionality as it becomes available.</p>
    <ul>
      <li>Connection Pooling</li>
      <li>Failover measures</li>
      <li>etc...</li>
    </ul>

    
<hr class="footer-rule"/>
<footer>
  ldbc is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://img.shields.io/badge/license-MIT-green">MIT</a> license.
</footer>


  </main>

</div>

</body>

</html>
