<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Setup</title>
  
  <meta name="author" content="ldbc contributors"/>
  
  <meta name="author" content="Takahiko Tominaga"/>
  
  
  <meta name="description" content="Documentation for ldbc"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/site.css" />
  <script src="../../helium/site/laika-helium.js"></script>
    <script src="../../helium/site/laika-versions.js"></script>
  <script>initVersions("../../../", "/en/tutorial/Setup.html", "latest", null);</script>
  
  <script> /* for avoiding page load transitions */ </script>
</head>

<body>

<header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    <div class="menu-container version-menu">
      <a class="text-link menu-toggle" href="#">Version 0.3</a>
      <nav class="menu-content">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="../../older-versions.html">Older Versions</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>

<nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3/latest/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
  </div>

  
  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../">ldbc</a></li>
    <li class="level1 nav-header">Tutorial</li>
    <li class="level2 nav-leaf"><a href="index.html">Intro</a></li>
    <li class="level2 active nav-leaf"><a href="#">Setup</a></li>
    <li class="level2 nav-leaf"><a href="Connection.html">Connection</a></li>
    <li class="level2 nav-leaf"><a href="Simple-Program.html">Simple Program</a></li>
    <li class="level2 nav-leaf"><a href="Database-Operations.html">Database Operation</a></li>
    <li class="level2 nav-leaf"><a href="Parameterized-Queries.html">Parameter</a></li>
    <li class="level2 nav-leaf"><a href="Selecting-Data.html">Data Select</a></li>
    <li class="level2 nav-leaf"><a href="Updating-Data.html">Data Update</a></li>
    <li class="level2 nav-leaf"><a href="Error-Handling.html">Error Handling</a></li>
    <li class="level2 nav-leaf"><a href="Logging.html">Logging</a></li>
    <li class="level2 nav-leaf"><a href="Custom-Data-Type.html">Custom data type</a></li>
    <li class="level2 nav-leaf"><a href="Query-Builder.html">Query Builder</a></li>
    <li class="level2 nav-leaf"><a href="Schema.html">Schema</a></li>
    <li class="level2 nav-leaf"><a href="Schema-Code-Generation.html">Schema code generation</a></li>
    <li class="level1 nav-header">Reference</li>
    <li class="level2 nav-leaf"><a href="../reference/">Intro</a></li>
    <li class="level2 nav-leaf"><a href="../reference/Connector.html">Connector</a></li>
  </ul>
  

</nav>

<div id="container">

  
<nav id="page-nav">
  <p class="header"><a href="#">Setup</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#database-setup">Database Setup</a></li>
    <li class="level1 nav-node"><a href="#scala-setup">Scala Setup</a></li>
    <li class="level2 nav-leaf"><a href="#first-program">First Program</a></li>
  </ul>

  <p class="footer"></p>
</nav>


  <main class="content">

    <h1 id="setup" class="title">Setup</h1>
    <p>Welcome to the wonderful world of ldbc! In this section we will help you get everything set up.</p>
    
    <h2 id="database-setup" class="section"><a class="anchor-link left" href="#database-setup"><i class="icofont-laika link">&#xef71;</i></a>Database Setup</h2>
    <p>First, start the database using Docker. Use the following code to start the database</p>
    <pre><code class="nohighlight"><span class="attribute-name">services</span><span>:
  </span><span class="attribute-name">mysql</span><span>:
    </span><span class="attribute-name">image</span><span>: </span><span class="string-literal">mysql:8.4.0</span><span>
    </span><span class="attribute-name">container_name</span><span>: </span><span class="string-literal">ldbc</span><span>
    </span><span class="attribute-name">environment</span><span>:
      </span><span class="attribute-name">MYSQL_USER</span><span>: </span><span class="string-literal">&#39;ldbc&#39;</span><span>
      </span><span class="attribute-name">MYSQL_PASSWORD</span><span>: </span><span class="string-literal">&#39;password&#39;</span><span>
      </span><span class="attribute-name">MYSQL_ROOT_PASSWORD</span><span>: </span><span class="string-literal">&#39;root&#39;</span><span>
    </span><span class="attribute-name">ports</span><span>:
      - </span><span class="number-literal">13306</span><span>:3306
    </span><span class="attribute-name">volumes</span><span>:
      - </span><span class="string-literal">./database:/docker-entrypoint-initdb.d</span><span>
    </span><span class="attribute-name">healthcheck</span><span>:
      </span><span class="attribute-name">test</span><span>: </span><span class="string-literal">[ &quot;CMD&quot;, &quot;mysqladmin&quot;, &quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]</span><span>
      </span><span class="attribute-name">timeout</span><span>: </span><span class="string-literal">20s</span><span>
      </span><span class="attribute-name">retries</span><span>: </span><span class="number-literal">10</span></code></pre>
    <p>Next, initialize the database.</p>
    <p>Create the database as shown in the code below.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">CREATE</span><span> </span><span class="identifier">DATABASE</span><span> </span><span class="identifier">IF</span><span> </span><span class="keyword">NOT</span><span> </span><span class="keyword">EXISTS</span><span> </span><span class="identifier">sandbox_db</span><span>;</span></code></pre>
    <p>Next, tables are created.</p>
    <pre><code class="nohighlight"><span class="keyword">CREATE</span><span> </span><span class="keyword">TABLE</span><span> </span><span class="identifier">IF</span><span> </span><span class="keyword">NOT</span><span> </span><span class="keyword">EXISTS</span><span> </span><span class="identifier">`user`</span><span> (
  </span><span class="identifier">`id`</span><span> </span><span class="type-name">INT</span><span> </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span> </span><span class="identifier">AUTO_INCREMENT</span><span> </span><span class="keyword">PRIMARY</span><span> </span><span class="keyword">KEY</span><span>,
  </span><span class="identifier">`name`</span><span> </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">50</span><span>) </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`email`</span><span> </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">100</span><span>) </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`created_at`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>,
  </span><span class="identifier">`updated_at`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">ON</span><span> </span><span class="keyword">UPDATE</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>
);

</span><span class="keyword">CREATE</span><span> </span><span class="keyword">TABLE</span><span> </span><span class="identifier">IF</span><span> </span><span class="keyword">NOT</span><span> </span><span class="keyword">EXISTS</span><span> </span><span class="identifier">`product`</span><span> (
  </span><span class="identifier">`id`</span><span> </span><span class="type-name">INT</span><span> </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span> </span><span class="identifier">AUTO_INCREMENT</span><span> </span><span class="keyword">PRIMARY</span><span> </span><span class="keyword">KEY</span><span>,
  </span><span class="identifier">`name`</span><span> </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">100</span><span>) </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`price`</span><span> </span><span class="type-name">DECIMAL</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="number-literal">2</span><span>) </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`created_at`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>,
  </span><span class="identifier">`updated_at`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">ON</span><span> </span><span class="keyword">UPDATE</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>
)

</span><span class="keyword">CREATE</span><span> </span><span class="keyword">TABLE</span><span> </span><span class="identifier">IF</span><span> </span><span class="keyword">NOT</span><span> </span><span class="keyword">EXISTS</span><span> </span><span class="identifier">`order`</span><span> (
  </span><span class="identifier">`id`</span><span> </span><span class="type-name">INT</span><span> </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span> </span><span class="identifier">AUTO_INCREMENT</span><span> </span><span class="keyword">PRIMARY</span><span> </span><span class="keyword">KEY</span><span>,
  </span><span class="identifier">`user_id`</span><span> </span><span class="type-name">INT</span><span> </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`product_id`</span><span> </span><span class="type-name">INT</span><span> </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`order_date`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>,
  </span><span class="identifier">`quantity`</span><span> </span><span class="type-name">INT</span><span> </span><span class="keyword">NOT</span><span> </span><span class="literal-value">NULL</span><span>,
  </span><span class="identifier">`created_at`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>,
  </span><span class="identifier">`updated_at`</span><span> </span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">DEFAULT</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span> </span><span class="keyword">ON</span><span> </span><span class="keyword">UPDATE</span><span> </span><span class="keyword">CURRENT</span><span>_</span><span class="type-name">TIMESTAMP</span><span>,
  </span><span class="keyword">FOREIGN</span><span> </span><span class="keyword">KEY</span><span> (</span><span class="keyword">user</span><span>_</span><span class="identifier">id</span><span>) </span><span class="keyword">REFERENCES</span><span> </span><span class="identifier">`user`</span><span> (</span><span class="identifier">id</span><span>),
  </span><span class="keyword">FOREIGN</span><span> </span><span class="keyword">KEY</span><span> (</span><span class="identifier">product_id</span><span>) </span><span class="keyword">REFERENCES</span><span> </span><span class="identifier">`product`</span><span> (</span><span class="identifier">id</span><span>)
)</span></code></pre>
    <p>Insert data into each table.</p>
    <pre><code class="nohighlight"><span class="keyword">INSERT</span><span> </span><span class="keyword">INTO</span><span> </span><span class="keyword">user</span><span> (</span><span class="identifier">name</span><span>, </span><span class="identifier">email</span><span>) </span><span class="keyword">VALUES</span><span>
  (</span><span class="string-literal">&#39;Alice&#39;</span><span>, </span><span class="string-literal">&#39;alice@example.com&#39;</span><span>),
  (</span><span class="string-literal">&#39;Bob&#39;</span><span>, </span><span class="string-literal">&#39;bob@example.com&#39;</span><span>),
  (</span><span class="string-literal">&#39;Charlie&#39;</span><span>, </span><span class="string-literal">&#39;charlie@example.com&#39;</span><span>);

</span><span class="keyword">INSERT</span><span> </span><span class="keyword">INTO</span><span> </span><span class="identifier">product</span><span> (</span><span class="identifier">name</span><span>, </span><span class="identifier">price</span><span>) </span><span class="keyword">VALUES</span><span>
  (</span><span class="string-literal">&#39;Laptop&#39;</span><span>, </span><span class="number-literal">999.99</span><span>),
  (</span><span class="string-literal">&#39;Mouse&#39;</span><span>, </span><span class="number-literal">19.99</span><span>),
  (</span><span class="string-literal">&#39;Keyboard&#39;</span><span>, </span><span class="number-literal">49.99</span><span>),
  (</span><span class="string-literal">&#39;Monitor&#39;</span><span>, </span><span class="number-literal">199.99</span><span>);

</span><span class="keyword">INSERT</span><span> </span><span class="keyword">INTO</span><span> </span><span class="identifier">`order`</span><span> (</span><span class="keyword">user</span><span>_</span><span class="identifier">id</span><span>, </span><span class="identifier">product_id</span><span>, </span><span class="identifier">quantity</span><span>) </span><span class="keyword">VALUES</span><span>
  (</span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>), </span><span class="comment">-- Alice ordered 1 Laptop
</span><span>  (</span><span class="number-literal">1</span><span>, </span><span class="number-literal">2</span><span>, </span><span class="number-literal">2</span><span>), </span><span class="comment">-- Alice ordered 2 Mice
</span><span>  (</span><span class="number-literal">2</span><span>, </span><span class="number-literal">3</span><span>, </span><span class="number-literal">1</span><span>), </span><span class="comment">-- Bob ordered 1 Keyboard
</span><span>  (</span><span class="number-literal">3</span><span>, </span><span class="number-literal">4</span><span>, </span><span class="number-literal">1</span><span>); </span><span class="comment">-- Charlie ordered 1 Monitor</span></code></pre>
    
    <h2 id="scala-setup" class="section"><a class="anchor-link left" href="#scala-setup"><i class="icofont-laika link">&#xef71;</i></a>Scala Setup</h2>
    <p>The tutorial will use <a href="https://scala-cli.virtuslab.org/">Scala CLI</a>. Therefore, you will need to install the Scala CLI.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span>brew install Virtuslab/scala-cli/scala-cli</span></code></pre>
    <p><strong>Execute with Scala CLI</strong></p>
    <p>The database setup described earlier can be performed using the Scala CLI. The following commands can be used to perform this setup.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span>scala-cli https://github.com/takapi</span><span class="number-literal">327</span><span>/ldbc/tree/master/docs/src/main/scala/</span><span class="number-literal">00</span><span>-Setup.scala --dependency io.github.takapi</span><span class="number-literal">327</span><span>::ldbc-dsl:</span><span class="number-literal">0.3.0</span><span>-beta</span><span class="number-literal">8</span><span> --dependency io.github.takapi</span><span class="number-literal">327</span><span>::ldbc-connector:</span><span class="number-literal">0.3.0</span><span>-beta</span><span class="number-literal">8</span></code></pre>
    
    <h3 id="first-program" class="section"><a class="anchor-link left" href="#first-program"><i class="icofont-laika link">&#xef71;</i></a>First Program</h3>
    <p>To begin, create a new project with ldbc as a dependency.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="comment">//&gt; using scala &quot;3.3.4&quot;
//&gt; using dep &quot;io.github.takapi327::ldbc-dsl:0.3.0-beta8&quot;</span></code></pre>
    <p>Before using ldbc, some symbols need to be imported. For convenience, we will use package import here. This will give us the symbols most commonly used when working with high-level APIs.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">dsl</span><span>.</span><span class="identifier">io</span><span>.*</span></code></pre>
    <p>Let&#39;s bring Cats too.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">all</span><span>.*
</span><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.*</span></code></pre>
    <p>Next, tracers and log handlers are provided. These are used to log applications. Tracers are used to record application traces. The log handler is used to log the application.</p>
    <p>The following code provides tracers and log handlers but does nothing with the entities.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">given</span><span> </span><span class="type-name">Tracer</span><span>[</span><span class="type-name">IO</span><span>]     = </span><span class="type-name">Tracer</span><span>.</span><span class="identifier">noop</span><span>[</span><span class="type-name">IO</span><span>]
</span><span class="keyword">given</span><span> </span><span class="type-name">LogHandler</span><span>[</span><span class="type-name">IO</span><span>] = </span><span class="type-name">LogHandler</span><span>.</span><span class="identifier">noop</span><span>[</span><span class="type-name">IO</span><span>]</span></code></pre>
    <p>The most common type handled by the ldbc high-level API is of the form <code>Executor[F, A]</code>, which specifies a calculation to be performed in a context where <code>{java | ldbc}.sql.Connection</code> is available, ultimately producing a value of type A.</p>
    <p>Let&#39;s start with an Executor program that only returns constants.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">program</span><span>: </span><span class="type-name">Executor</span><span>[</span><span class="type-name">IO</span><span>, </span><span class="type-name">Int</span><span>] = </span><span class="type-name">Executor</span><span>.</span><span class="identifier">pure</span><span>[</span><span class="type-name">IO</span><span>, </span><span class="type-name">Int</span><span>](</span><span class="number-literal">1</span><span>)</span></code></pre>
    <p>Next, create a connector to connect to the database. A connector is a resource for managing connections to a database. A connector provides resources to initiate a connection to the database, execute a query, and close the connection.</p>
    <p>Here, ldbc uses a connector created by ldbc on its own. How to select and create a connector will be explained later.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">connection</span><span> = </span><span class="type-name">Connection</span><span>[</span><span class="type-name">IO</span><span>](
  </span><span class="identifier">host</span><span>     = </span><span class="string-literal">&quot;127.0.0.1&quot;</span><span>,
  </span><span class="identifier">port</span><span>     = </span><span class="number-literal">13306</span><span>,
  </span><span class="identifier">user</span><span>     = </span><span class="string-literal">&quot;ldbc&quot;</span><span>,
  </span><span class="identifier">password</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;password&quot;</span><span>),
  </span><span class="identifier">ssl</span><span>      = </span><span class="type-name">SSL</span><span>.</span><span class="type-name">Trusted</span><span>
)</span></code></pre>
    <p>Executor is a data type that knows how to connect to a database, how to pass connections, and how to clean up connections, and this knowledge allows Executor to be converted to IO to obtain an executable program. Specifically, execution yields an IO that connects to the database and executes a single transaction.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">connection</span><span>
  .</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
    </span><span class="identifier">program</span><span>.</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>).</span><span class="identifier">map</span><span>(</span><span class="identifier">println</span><span>(</span><span class="identifier">_</span><span>))
  }
  .</span><span class="identifier">unsafeRunSync</span><span>()</span></code></pre>
    <p>Hooray! I was able to calculate the constants. This is not very interesting, since we will not be asking the database to do the work, but the first step is complete.</p>
    <blockquote>Remember that all the code in this book is pure except for the call to IO.unsafeRunSync. IO.unsafeRunSync is an “end of the world” operation that usually appears only at the entry point of an application. The REPL forces the calculation to to use this to make it “happen.”</blockquote>
    <p><strong>Execute with Scala CLI</strong></p>
    <p>This program can also be run using the Scala CLI. The following command will execute this program.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span>scala-cli https://github.com/takapi</span><span class="number-literal">327</span><span>/ldbc/tree/master/docs/src/main/scala/</span><span class="number-literal">01</span><span>-Program.scala --dependency io.github.takapi</span><span class="number-literal">327</span><span>::ldbc-dsl:</span><span class="number-literal">0.3.0</span><span>-beta</span><span class="number-literal">8</span><span> --dependency io.github.takapi</span><span class="number-literal">327</span><span>::ldbc-connector:</span><span class="number-literal">0.3.0</span><span>-beta</span><span class="number-literal">8</span></code></pre>

    
<hr class="footer-rule"/>
<footer>
  ldbc is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://img.shields.io/badge/license-MIT-green">MIT</a> license.
</footer>


  </main>

</div>

</body>

</html>
