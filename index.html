<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>ldbc</title>
  
  <meta name="author" content="ldbc contributors"/>
  
  <meta name="author" content="Takahiko Tominaga"/>
  
  
  <meta name="description" content="Documentation for ldbc"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="css/site.css" />
  <script src="helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

<body>

<header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>

<nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/takapi327/ldbc"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>

  
  <ul class="nav-list">
    <li class="level1 active nav-leaf"><a href="#">ldbc</a></li>
  </ul>
  

</nav>

<div id="container">

  
<nav id="page-nav">
  <p class="header"><a href="#">ldbc</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#modules-availability">Modules availability</a></li>
    <li class="level1 nav-node"><a href="#quick-start">Quick Start</a></li>
    <li class="level2 nav-leaf"><a href="#dependency-configuration">Dependency Configuration</a></li>
    <li class="level2 nav-leaf"><a href="#usage">Usage</a></li>
    <li class="level1 nav-leaf"><a href="#documentation">Documentation</a></li>
    <li class="level1 nav-node"><a href="#contributing">Contributing</a></li>
    <li class="level2 nav-leaf"><a href="#testing-locally">Testing locally</a></li>
  </ul>

  <p class="footer"></p>
</nav>


  <main class="content">

    <h1 id="ldbc-lepus-database-connectivity" class="title">ldbc (Lepus Database Connectivity)</h1>
    <div class="center-logo">
      <img src="img/lepus_logo.png" alt="ldbc (Lepus Database Connectivity)">
    </div>
    <p><a href="https://github.com/takapi327/ldbc/actions/workflows/ci.yml"><img src="https://github.com/takapi327/ldbc/actions/workflows/ci.yml/badge.svg?branch=master" alt="Continuous Integration"></a>
    <a href="https://en.wikipedia.org/wiki/MIT_License"><img src="https://img.shields.io/badge/license-MIT-green" alt="MIT License"></a>
    <a href="https://github.com/lampepfl/dotty"><img src="https://img.shields.io/badge/scala-v3.3.x-red" alt="Scala Version"></a>
    <a href="https://typelevel.org/projects/affiliate/"><img src="https://img.shields.io/badge/typelevel-affiliate%20project-FF6169.svg" alt="Typelevel Affiliate Project"></a>
    <a href="https://javadoc.io/doc/io.github.takapi327/ldbc-dsl_3"><img src="https://javadoc.io/badge2/io.github.takapi327/ldbc-dsl_3/javadoc.svg" alt="javadoc"></a>
    <a href="https://search.maven.org/artifact/io.github.takapi327/ldbc-dsl_3/0.3.0-beta4/jar"><img src="https://maven-badges.herokuapp.com/maven-central/io.github.takapi327/ldbc-dsl_3/badge.svg?color=blue" alt="Maven Central Version"></a>
    <a href="https://index.scala-lang.org/takapi327/ldbc"><img src="https://index.scala-lang.org/takapi327/ldbc/ldbc-dsl/latest-by-scala-version.svg?color=blue" alt="scaladex"></a>
    <a href="https://index.scala-lang.org/takapi327/ldbc"><img src="https://index.scala-lang.org/takapi327/ldbc/ldbc-dsl/latest-by-scala-version.svg?color=blue&targetType=js" alt="scaladex"></a>
    <a href="https://index.scala-lang.org/takapi327/ldbc"><img src="https://index.scala-lang.org/takapi327/ldbc/ldbc-dsl/latest-by-scala-version.svg?color=blue&targetType=native" alt="scaladex"></a></p>
    <p>========================================================================================</p>
    <p>ldbc (Lepus Database Connectivity) is Pure functional JDBC layer with Cats Effect 3 and Scala 3.</p>
    <p>ldbc is a <a href="http://typelevel.org/">Typelevel</a> project. This means we embrace pure, typeful, functional programming, and provide a safe and friendly environment for teaching, learning, and contributing as described in the Scala <a href="http://scala-lang.org/conduct.html">Code of Conduct</a>.</p>
    <p>Note that <strong>ldbc</strong> is pre-1.0 software and is still undergoing active development. New versions are <strong>not</strong> binary compatible with prior versions, although in most cases user code will be source compatible.</p>
    
    <h2 id="modules-availability" class="section"><a class="anchor-link left" href="#modules-availability"><i class="icofont-laika link">&#xef71;</i></a>Modules availability</h2>
    <p>ldbc is available on the JVM, Scala.js, and ScalaNative</p>
    <table>
      <thead>
        <tr>
          <th>Module / Platform</th>
          <th>JVM</th>
          <th>Scala Native</th>
          <th>Scala.js</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>ldbc-core</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>ldbc-sql</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>ldbc-connector</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>jdbc-connector</code></td>
          <td>✅</td>
          <td>❌</td>
          <td>❌</td>
        </tr>
        <tr>
          <td><code>ldbc-dsl</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>ldbc-query-builder</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>ldbc-schema</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>ldbc-schemaSpy</code></td>
          <td>✅</td>
          <td>❌</td>
          <td>❌</td>
        </tr>
        <tr>
          <td><code>ldbc-codegen</code></td>
          <td>✅</td>
          <td>✅</td>
          <td>✅</td>
        </tr>
        <tr>
          <td><code>ldbc-hikari</code></td>
          <td>✅</td>
          <td>❌</td>
          <td>❌</td>
        </tr>
        <tr>
          <td><code>ldbc-plugin</code></td>
          <td>✅</td>
          <td>❌</td>
          <td>❌</td>
        </tr>
      </tbody>
    </table>
    
    <h2 id="quick-start" class="section"><a class="anchor-link left" href="#quick-start"><i class="icofont-laika link">&#xef71;</i></a>Quick Start</h2>
    <p>For people that want to skip the explanations and see it action, this is the place to start!</p>
    
    <h3 id="dependency-configuration" class="section"><a class="anchor-link left" href="#dependency-configuration"><i class="icofont-laika link">&#xef71;</i></a>Dependency Configuration</h3>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %% </span><span class="string-literal">&quot;ldbc-dsl&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    <p>For Cross-Platform projects (JVM, JS, and/or Native):</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %%% </span><span class="string-literal">&quot;ldbc-dsl&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    <p>The dependency package used depends on whether the database connection is made via a connector using the Java API or a connector provided by ldbc.</p>
    <p><strong>Use jdbc connector</strong></p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %% </span><span class="string-literal">&quot;jdbc-connector&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    <p><strong>Use ldbc connector</strong></p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %% </span><span class="string-literal">&quot;ldbc-connector&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    <p>For Cross-Platform projects (JVM, JS, and/or Native)</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %%% </span><span class="string-literal">&quot;ldbc-connector&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    
    <h3 id="usage" class="section"><a class="anchor-link left" href="#usage"><i class="icofont-laika link">&#xef71;</i></a>Usage</h3>
    <p>The difference in usage is that there are differences in the way connections are built between jdbc and ldbc.</p>
    <blockquote><strong>ldbc</strong> is currently under active development. Please note that current functionality may therefore be deprecated or changed in the future.</blockquote>
    <p><strong>jdbc connector</strong></p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">ds</span><span> = </span><span class="keyword">new</span><span> </span><span class="identifier">com</span><span>.</span><span class="identifier">mysql</span><span>.</span><span class="identifier">cj</span><span>.</span><span class="identifier">jdbc</span><span>.</span><span class="type-name">MysqlDataSource</span><span>()
</span><span class="identifier">ds</span><span>.</span><span class="identifier">setServerName</span><span>(</span><span class="string-literal">&quot;127.0.0.1&quot;</span><span>)
</span><span class="identifier">ds</span><span>.</span><span class="identifier">setPortNumber</span><span>(</span><span class="number-literal">3306</span><span>)
</span><span class="identifier">ds</span><span>.</span><span class="identifier">setDatabaseName</span><span>(</span><span class="string-literal">&quot;world&quot;</span><span>)
</span><span class="identifier">ds</span><span>.</span><span class="identifier">setUser</span><span>(</span><span class="string-literal">&quot;ldbc&quot;</span><span>)
</span><span class="identifier">ds</span><span>.</span><span class="identifier">setPassword</span><span>(</span><span class="string-literal">&quot;password&quot;</span><span>)

</span><span class="keyword">val</span><span> </span><span class="identifier">datasource</span><span> = </span><span class="identifier">jdbc</span><span>.</span><span class="identifier">connector</span><span>.</span><span class="type-name">MysqlDataSource</span><span>[</span><span class="type-name">IO</span><span>](</span><span class="identifier">ds</span><span>)

</span><span class="keyword">val</span><span> </span><span class="identifier">connection</span><span>: </span><span class="type-name">Resource</span><span>[</span><span class="type-name">IO</span><span>, </span><span class="type-name">Connection</span><span>[</span><span class="type-name">IO</span><span>]] =
  </span><span class="type-name">Resource</span><span>.</span><span class="identifier">make</span><span>(</span><span class="identifier">datasource</span><span>.</span><span class="identifier">getConnection</span><span>)(</span><span class="identifier">_</span><span>.</span><span class="identifier">close</span><span>())</span></code></pre>
    <p><strong>ldbc connector</strong></p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">connection</span><span>: </span><span class="type-name">Resource</span><span>[</span><span class="type-name">IO</span><span>, </span><span class="type-name">Connection</span><span>[</span><span class="type-name">IO</span><span>]] =
  </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">connector</span><span>.</span><span class="type-name">Connection</span><span>[</span><span class="type-name">IO</span><span>](
    </span><span class="identifier">host</span><span>     = </span><span class="string-literal">&quot;127.0.0.1&quot;</span><span>,
    </span><span class="identifier">port</span><span>     = </span><span class="number-literal">3306</span><span>,
    </span><span class="identifier">user</span><span>     = </span><span class="string-literal">&quot;ldbc&quot;</span><span>,
    </span><span class="identifier">password</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;password&quot;</span><span>),
    </span><span class="identifier">database</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;ldbc&quot;</span><span>),
    </span><span class="identifier">ssl</span><span>      = </span><span class="type-name">SSL</span><span>.</span><span class="type-name">Trusted</span><span>
  )</span></code></pre>
    <p>The connection process to the database can be carried out using the connections established by each of these methods.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">result</span><span>: </span><span class="type-name">IO</span><span>[(</span><span class="type-name">List</span><span>[</span><span class="type-name">Int</span><span>], </span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>], </span><span class="type-name">Int</span><span>)] = </span><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  (</span><span class="keyword">for</span><span>
    </span><span class="identifier">result1</span><span> &lt;- </span><span class="string-literal">sql&quot;SELECT 1&quot;</span><span>.</span><span class="identifier">toList</span><span>[</span><span class="type-name">Int</span><span>]
    </span><span class="identifier">result2</span><span> &lt;- </span><span class="string-literal">sql&quot;SELECT 2&quot;</span><span>.</span><span class="identifier">headOption</span><span>[</span><span class="type-name">Int</span><span>]
    </span><span class="identifier">result3</span><span> &lt;- </span><span class="string-literal">sql&quot;SELECT 3&quot;</span><span>.</span><span class="identifier">unsafe</span><span>[</span><span class="type-name">Int</span><span>]
  </span><span class="keyword">yield</span><span> (</span><span class="identifier">result1</span><span>, </span><span class="identifier">result2</span><span>, </span><span class="identifier">result3</span><span>)).</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)
}</span></code></pre>
    
    <h4 id="using-the-query-builder" class="section"><a class="anchor-link left" href="#using-the-query-builder"><i class="icofont-laika link">&#xef71;</i></a>Using the query builder</h4>
    <p>ldbc provides not only plain queries but also type-safe database connections using the query builder.</p>
    <p>The first step is to create a schema for use by the query builder.</p>
    <p>ldbc maintains a one-to-one mapping between Scala models and database table definitions. The mapping between the properties held by the model and the columns held by the table is done in definition order. Table definitions are very similar to the structure of Create statements. This makes the construction of table definitions intuitive for the user.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">User</span><span>(
  </span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>,
  </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>,
  </span><span class="identifier">age</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>],
)

</span><span class="keyword">val</span><span> </span><span class="identifier">table</span><span> = </span><span class="type-name">Table</span><span>[</span><span class="type-name">User</span><span>](</span><span class="string-literal">&quot;user&quot;</span><span>)(                     </span><span class="comment">// CREATE TABLE `user` (
</span><span>  </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;id&quot;</span><span>, </span><span class="type-name">BIGINT</span><span>, </span><span class="type-name">AUTO_INCREMENT</span><span>, </span><span class="type-name">PRIMARY_KEY</span><span>), </span><span class="comment">//   `id` BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
</span><span>  </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;name&quot;</span><span>, </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">255</span><span>)),                      </span><span class="comment">//   `name` VARCHAR(255) NOT NULL,
</span><span>  </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;age&quot;</span><span>, </span><span class="type-name">INT</span><span>.</span><span class="type-name">UNSIGNED</span><span>.</span><span class="type-name">DEFAULT</span><span>(</span><span class="type-name">None</span><span>)),         </span><span class="comment">//   `age` INT unsigned DEFAULT NULL
</span><span>)              </span></code></pre>
    <p>The next step is to build a TableQuery using the schema you have created.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">query</span><span>.</span><span class="identifier">builder</span><span>.</span><span class="type-name">TableQuery</span><span>

</span><span class="keyword">val</span><span> </span><span class="identifier">userQuery</span><span> = </span><span class="type-name">TableQuery</span><span>[</span><span class="type-name">User</span><span>](</span><span class="identifier">table</span><span>)</span></code></pre>
    <p>Finally, you can use the query builder to create a query.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">result</span><span>: </span><span class="type-name">IO</span><span>[</span><span class="type-name">List</span><span>[</span><span class="type-name">User</span><span>]] = </span><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">userQuery</span><span>.</span><span class="identifier">selectAll</span><span>.</span><span class="identifier">toList</span><span>[</span><span class="type-name">User</span><span>].</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)
  </span><span class="comment">// &quot;SELECT `id`, `name`, `age` FROM user&quot;
</span><span>}</span></code></pre>
    
    <h4 id="using-the-schema" class="section"><a class="anchor-link left" href="#using-the-schema"><i class="icofont-laika link">&#xef71;</i></a>Using the schema</h4>
    <p>ldbc also allows type-safe construction of schema information for tables.</p>
    <p>The first step is to set up dependencies.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %% </span><span class="string-literal">&quot;ldbc-schema&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    <p>For Cross-Platform projects (JVM, JS, and/or Native):</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;io.github.takapi327&quot;</span><span> %%% </span><span class="string-literal">&quot;ldbc-schema&quot;</span><span> % </span><span class="string-literal">&quot;0.3.0-beta4&quot;</span></code></pre>
    <p>The next step is to create a schema for use by the query builder.</p>
    <p>ldbc maintains a one-to-one mapping between Scala models and database table definitions. The mapping between the properties held by the model and the columns held by the table is done in definition order. Table definitions are very similar to the structure of Create statements. This makes the construction of table definitions intuitive for the user.</p>
    <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">ldbc</span><span>.</span><span class="identifier">schema</span><span>.*

</span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">User</span><span>(
  </span><span class="identifier">id</span><span>: </span><span class="type-name">Long</span><span>,
  </span><span class="identifier">name</span><span>: </span><span class="type-name">String</span><span>,
  </span><span class="identifier">age</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>],
)

</span><span class="keyword">val</span><span> </span><span class="identifier">userTable</span><span> = </span><span class="type-name">Table</span><span>[</span><span class="type-name">User</span><span>](</span><span class="string-literal">&quot;user&quot;</span><span>)(                 </span><span class="comment">// CREATE TABLE `user` (
</span><span>  </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;id&quot;</span><span>, </span><span class="type-name">BIGINT</span><span>, </span><span class="type-name">AUTO_INCREMENT</span><span>, </span><span class="type-name">PRIMARY_KEY</span><span>), </span><span class="comment">//   `id` BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
</span><span>  </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;name&quot;</span><span>, </span><span class="type-name">VARCHAR</span><span>(</span><span class="number-literal">255</span><span>)),                      </span><span class="comment">//   `name` VARCHAR(255) NOT NULL,
</span><span>  </span><span class="identifier">column</span><span>(</span><span class="string-literal">&quot;age&quot;</span><span>, </span><span class="type-name">INT</span><span>.</span><span class="type-name">UNSIGNED</span><span>.</span><span class="type-name">DEFAULT</span><span>(</span><span class="type-name">None</span><span>)),         </span><span class="comment">//   `age` INT unsigned DEFAULT NULL
</span><span>)                                                    </span><span class="comment">// )</span></code></pre>
    <p>Finally, you can use the query builder to create a query.</p>
    <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">result</span><span>: </span><span class="type-name">IO</span><span>[</span><span class="type-name">List</span><span>[</span><span class="type-name">User</span><span>]] = </span><span class="identifier">connection</span><span>.</span><span class="identifier">use</span><span> { </span><span class="identifier">conn</span><span> =&gt;
  </span><span class="identifier">userTable</span><span>.</span><span class="identifier">selectAll</span><span>.</span><span class="identifier">query</span><span>[</span><span class="type-name">User</span><span>].</span><span class="identifier">to</span><span>[</span><span class="type-name">List</span><span>].</span><span class="identifier">readOnly</span><span>(</span><span class="identifier">conn</span><span>)
  </span><span class="comment">// &quot;SELECT `id`, `name`, `age` FROM user&quot;
</span><span>}</span></code></pre>
    
    <h2 id="documentation" class="section"><a class="anchor-link left" href="#documentation"><i class="icofont-laika link">&#xef71;</i></a>Documentation</h2>
    <p>Full documentation can be found at Currently available in English and Japanese.</p>
    <ul>
      <li><a href="en/">English</a></li>
      <li><a href="ja/">Japanese</a></li>
    </ul>
    
    <h2 id="contributing" class="section"><a class="anchor-link left" href="#contributing"><i class="icofont-laika link">&#xef71;</i></a>Contributing</h2>
    <p>All suggestions welcome :)!</p>
    <p>If you’d like to contribute, see the list of <a href="https://github.com/takapi327/ldbc/issues">issues</a> and pick one! Or report your own. If you have an idea you’d like to discuss, that’s always a good option.</p>
    <p>If you have any questions about why or how it works, feel free to ask on github. This probably means that the documentation, scaladocs, and code are unclear and can be improved for the benefit of all.</p>
    
    <h3 id="testing-locally" class="section"><a class="anchor-link left" href="#testing-locally"><i class="icofont-laika link">&#xef71;</i></a>Testing locally</h3>
    <p>If you want to build and run the tests for yourself, you&#39;ll need a local MySQL database. The easiest way to do this is to run <code>docker-compose up</code> from the project root.</p>

    
<hr class="footer-rule"/>
<footer>
  ldbc is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://img.shields.io/badge/license-MIT-green">MIT</a> license.
</footer>


  </main>

</div>

</body>

</html>
